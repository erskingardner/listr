import{I as Ie,g as Ne,a as Me,N as Ze,m as Ue,n as ke,c as we,y as je,z as Ft,b as Xe,B as Ct,C as Fe,h as Wt,D as qt,E as Qe,T as Zt,e as he,k as Ae,o as Se}from"../chunks/currentUserFollows.1b7aaca4.js";import{s as ie,A as te,B as de,r as Te,u as Le,v as Ce,w as Pe,_ as xe,f as P,a as B,l as K,g as O,h as W,c as j,m as G,d as _,j as $,i as D,x as g,n as be,z as ge,o as Pt,$ as Ot,Q as Dt,y as ve,R as Bt,S as ze,a0 as re,J as se,M as He,O as We,e as ee,L as Ke,H as jt,E as ye,U as At,a1 as et,a2 as Ht}from"../chunks/scheduler.d926ef25.js";import{S as oe,i as ae,b as R,d as V,m as z,a as y,t as M,e as F,g as ue,c as ce,f as tt}from"../chunks/index.d0db5775.js";import{v as St,M as Kt,C as Gt,N as Yt,n as Jt,I as Xt,a as Re}from"../chunks/v4.1c83eeac.js";import{P as Ge,C as Qt}from"../chunks/UserDetails.9d64d9ac.js";import{a as Ye,g as xt,b as en}from"../chunks/navigation.1c19c233.js";import{e as nt,b as lt}from"../chunks/index.9af295b1.js";function tn(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function nn(s){let e,n;const t=[{name:"file-edit"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[tn]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function ln(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class rn extends oe{constructor(e){super(),ae(this,e,ln,nn,ie,{})}}const sn=rn;function on(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function an(s){let e,n;const t=[{name:"file-x"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[on]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function fn(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}],["polyline",{points:"14 2 14 8 20 8"}],["line",{x1:"9.5",x2:"14.5",y1:"12.5",y2:"17.5"}],["line",{x1:"14.5",x2:"9.5",y1:"12.5",y2:"17.5"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class un extends oe{constructor(e){super(),ae(this,e,fn,an,ie,{})}}const cn=un;function dn(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function mn(s){let e,n;const t=[{name:"git-fork"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[dn]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function hn(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["circle",{cx:"12",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["circle",{cx:"18",cy:"6",r:"3"}],["path",{d:"M18 9v1a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V9"}],["path",{d:"M12 12v3"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class gn extends oe{constructor(e){super(),ae(this,e,hn,mn,ie,{})}}const Ut=gn;function pn(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function _n(s){let e,n;const t=[{name:"hard-drive-upload"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[pn]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function bn(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["path",{d:"m16 6-4-4-4 4"}],["path",{d:"M12 2v8"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2"}],["path",{d:"M6 18h.01"}],["path",{d:"M10 18h.01"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class kn extends oe{constructor(e){super(),ae(this,e,bn,_n,ie,{})}}const vn=kn;function $n(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function wn(s){let e,n;const t=[{name:"heart"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[$n]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function En(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class yn extends oe{constructor(e){super(),ae(this,e,En,wn,ie,{})}}const In=yn;function Nn(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function Mn(s){let e,n;const t=[{name:"trash-2"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[Nn]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Tn(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class Ln extends oe{constructor(e){super(),ae(this,e,Tn,Mn,ie,{})}}const Cn=Ln;function Pn(s){let e;const n=s[2].default,t=Te(n,s,s[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,l){t&&t.m(r,l),e=!0},p(r,l){t&&t.p&&(!e||l&8)&&Le(t,n,r,r[3],e?Pe(n,r[3],l,null):Ce(r[3]),null)},i(r){e||(y(t,r),e=!0)},o(r){M(t,r),e=!1},d(r){t&&t.d(r)}}}function On(s){let e,n;const t=[{name:"zap"},s[1],{iconNode:s[0]}];let r={$$slots:{default:[Pn]},$$scope:{ctx:s}};for(let l=0;l<t.length;l+=1)r=te(r,t[l]);return e=new Ie({props:r}),{c(){R(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,i){z(e,l,i),n=!0},p(l,[i]){const o=i&3?Ne(t,[t[0],i&2&&Me(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){M(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Dn(s,e,n){let{$$slots:t={},$$scope:r}=e;const l=[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}]];return s.$$set=i=>{n(1,e=te(te({},e),de(i))),"$$scope"in i&&n(3,r=i.$$scope)},e=de(e),[l,e,t,r]}class Bn extends oe{constructor(e){super(),ae(this,e,Dn,On,ie,{})}}const Rt=Bn,jn=async({params:s})=>{const e=s.nip19,n=xe(ke),t=xe(we),r=await n.fetchEvent(e),l=r==null?void 0:r.rawEvent(),i=Ze.from(r);let o;if(!o&&i.content.length>0&&(t==null?void 0:t.hexpubkey)===i.pubkey){const f=new Ue;n.signer=f,o=await i.encryptedTags()}const a=i.items.length+((o==null?void 0:o.length)||0);return{kind:parseInt(s.kind),nip19:e,name:i.name,description:i.description,rawList:l,listId:i.tagId(),items:i.items,privateItems:o,itemCount:a}},Dl=Object.freeze(Object.defineProperty({__proto__:null,load:jn},Symbol.toStringTag,{value:"Module"}));var Vt={},qe={},le={},Oe=je&&je.__extends||function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}}();Object.defineProperty(le,"__esModule",{value:!0});le.InternalError=le.InvalidDataError=le.RoutingError=le.UnsupportedMethodError=le.ConnectionError=le.RejectionError=le.MissingProviderError=void 0;function De(s,e,n){if(Object.setPrototypeOf(s,n.prototype),e===n)if(s.name=e.name,Error.captureStackTrace)Error.captureStackTrace(s,n);else{var t=new Error(s.message).stack;t&&(s.stack=An(t,"new ".concat(e.name)))}}function An(s,e){if(!s||!e)return s;var n=new RegExp("\\s+at\\s".concat(e,"\\s")),t=s.split(`
`),r=t.filter(function(l){return!l.match(n)});return r.join(`
`)}var Sn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.MissingProviderError=Sn;var Un=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.RejectionError=Un;var Rn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.ConnectionError=Rn;var Vn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.UnsupportedMethodError=Vn;var zn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.RoutingError=zn;var Fn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.InvalidDataError=Fn;var Wn=function(s){Oe(e,s);function e(n){var t=this.constructor,r=s.call(this,n)||this;return De(r,t,e),r}return e}(Error);le.InternalError=Wn;Object.defineProperty(qe,"__esModule",{value:!0});qe.requestProvider=void 0;var qn=le;function Zn(s){return new Promise(function(e,n){if(typeof window>"u")return n(new Error("Must be called in a browser context"));var t=window.webln;if(!t)return n(new qn.MissingProviderError("Your browser has no WebLN provider"));t.enable().then(function(){return e(t)}).catch(function(r){return n(r)})})}qe.requestProvider=Zn;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});(function(s){var e=je&&je.__createBinding||(Object.create?function(t,r,l,i){i===void 0&&(i=l);var o=Object.getOwnPropertyDescriptor(r,l);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[l]}}),Object.defineProperty(t,i,o)}:function(t,r,l,i){i===void 0&&(i=l),t[i]=r[l]}),n=je&&je.__exportStar||function(t,r){for(var l in t)l!=="default"&&!Object.prototype.hasOwnProperty.call(r,l)&&e(r,t,l)};Object.defineProperty(s,"__esModule",{value:!0}),n(qe,s),n(zt,s),n(le,s)})(Vt);function Hn(s){let e;return{c(){e=K("Please sign in to zap.")},l(n){e=G(n,"Please sign in to zap.")},m(n,t){D(n,e,t)},p:ve,i:ve,o:ve,d(n){n&&_(e)}}}function Kn(s){let e,n,t,r,l,i,o,a,f,c,u,k,E,d,b;return u=new Rt({props:{strokeWidth:"1.5",class:"stroke-yellow-500 fill-yellow-500 w-5 h-5",size:"20"}}),{c(){e=P("form"),n=P("label"),t=K(`Amount *
                    `),r=P("input"),l=B(),i=P("label"),o=K(`Comment
                    `),a=P("input"),f=B(),c=P("button"),R(u.$$.fragment),k=K(`
                    Zap this list`),this.h()},l(m){e=O(m,"FORM",{class:!0});var p=W(e);n=O(p,"LABEL",{for:!0});var T=W(n);t=G(T,`Amount *
                    `),r=O(T,"INPUT",{type:!0,name:!0,class:!0}),T.forEach(_),l=j(p),i=O(p,"LABEL",{for:!0});var L=W(i);o=G(L,`Comment
                    `),a=O(L,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),L.forEach(_),f=j(p),c=O(p,"BUTTON",{type:!0,class:!0});var C=W(c);V(u.$$.fragment,C),k=G(C,`
                    Zap this list`),C.forEach(_),p.forEach(_),this.h()},h(){$(r,"type","text"),$(r,"name","amount"),$(r,"class","rounded-md bg-transparent w-full text-sm"),r.required=!0,$(n,"for","amount"),$(a,"type","text"),$(a,"name","comment"),$(a,"class","rounded-md bg-transparent w-full text-sm"),$(a,"placeholder","Zap comment"),$(i,"for","comment"),$(c,"type","submit"),$(c,"class","w-full flex flex-row items-center mt-2 gap-1 rounded-md p-2 text-sm font-semibold leading-6 text-gray-200 bg-indigo-600 hover:bg-indigo-500 hover:text-white"),$(e,"class","flex flex-col gap-2 justify-start items-start")},m(m,p){D(m,e,p),g(e,n),g(n,t),g(n,r),re(r,s[1]),g(e,l),g(e,i),g(i,o),g(i,a),re(a,s[2]),g(e,f),g(e,c),z(u,c,null),g(c,k),E=!0,d||(b=[se(r,"input",s[10]),se(a,"input",s[11]),se(e,"submit",He(s[6]))],d=!0)},p(m,p){p&2&&r.value!==m[1]&&re(r,m[1]),p&4&&a.value!==m[2]&&re(a,m[2])},i(m){E||(y(u.$$.fragment,m),E=!0)},o(m){M(u.$$.fragment,m),E=!1},d(m){m&&_(e),F(u),d=!1,We(b)}}}function Gn(s){let e,n,t,r;const l=[Kn,Hn],i=[];function o(a,f){return a[0]?0:1}return n=o(s),t=i[n]=l[n](s),{c(){e=P("div"),t.c(),this.h()},l(a){e=O(a,"DIV",{class:!0});var f=W(e);t.l(f),f.forEach(_),this.h()},h(){$(e,"class","panel-contents flex flex-col gap-2")},m(a,f){D(a,e,f),i[n].m(e,null),r=!0},p(a,f){let c=n;n=o(a),n===c?i[n].p(a,f):(ue(),M(i[c],1,1,()=>{i[c]=null}),ce(),t=i[n],t?t.p(a,f):(t=i[n]=l[n](a),t.c()),y(t,1),t.m(e,null))},i(a){r||(y(t),r=!0)},o(a){M(t),r=!1},d(a){a&&_(e),i[n].d()}}}function Yn(s){let e,n,t,r=(s[3]||0)+"",l,i,o,a;return n=new Rt({props:{strokeWidth:"1.5",class:"hover:fill-yellow-500 "+(s[4]?"fill-yellow-500 stroke-yellow-500":"stroke-gray-500")+" hover:stroke-black w-4 lg:w-5 h-4 lg:h-5"}}),o=new Ge({props:{title:"Zap this list",triggeredBy:"#zapButton",trigger:"click",placement:"left-end",$$slots:{default:[Gn]},$$scope:{ctx:s}}}),{c(){e=P("button"),R(n.$$.fragment),t=B(),l=K(r),i=B(),R(o.$$.fragment),this.h()},l(f){e=O(f,"BUTTON",{id:!0,class:!0});var c=W(e);V(n.$$.fragment,c),t=j(c),l=G(c,r),c.forEach(_),i=j(f),V(o.$$.fragment,f),this.h()},h(){$(e,"id","zapButton"),$(e,"class","flex flex-row gap-1 items-center text-sm lg:text-base")},m(f,c){D(f,e,c),z(n,e,null),g(e,t),g(e,l),D(f,i,c),z(o,f,c),a=!0},p(f,[c]){const u={};c&16&&(u.class="hover:fill-yellow-500 "+(f[4]?"fill-yellow-500 stroke-yellow-500":"stroke-gray-500")+" hover:stroke-black w-4 lg:w-5 h-4 lg:h-5"),n.$set(u),(!a||c&8)&&r!==(r=(f[3]||0)+"")&&be(l,r);const k={};c&8199&&(k.$$scope={dirty:c,ctx:f}),o.$set(k)},i(f){a||(y(n.$$.fragment,f),y(o.$$.fragment,f),a=!0)},o(f){M(n.$$.fragment,f),M(o.$$.fragment,f),a=!1},d(f){f&&(_(e),_(i)),F(n),F(o,f)}}}function Jn(s,e,n){let t,r,l=ve,i=()=>(l(),l=Bt(d,T=>n(9,r=T)),d),o;ge(s,we,T=>n(0,t=T)),ge(s,ke,T=>n(12,o=T)),s.$$.on_destroy.push(()=>l());let{listId:a}=e,{nip19:f}=e,c=402,u,k=0,E=!1,d;i(d=o.storeSubscribe({kinds:[9735],"#a":[a]},{closeOnEose:!0})),Pt(()=>{i(n(5,d=o.storeSubscribe({kinds:[9735],"#a":[a]},{closeOnEose:!0})))}),Ot(()=>d==null?void 0:d.unsubscribe()),Dt(()=>d==null?void 0:d.unsubscribe()),Ye(()=>{n(4,E=!1),i(n(5,d=o.storeSubscribe({kinds:[9735],"#a":[a]},{closeOnEose:!0})))});async function b(){const T=new Ue;ze(ke,o.signer=T,o);const L=await o.fetchEvent(f);let C=await(L==null?void 0:L.zap(c*1e3,u));if(!C){console.log("No payment request");return}try{const ne=await(await Vt.requestProvider()).sendPayment(C)}catch(Q){console.log(Q)}}function m(){c=this.value,n(1,c)}function p(){u=this.value,n(2,u)}return s.$$set=T=>{"listId"in T&&n(7,a=T.listId),"nip19"in T&&n(8,f=T.nip19)},s.$$.update=()=>{s.$$.dirty&513&&n(3,k=r.map(T=>{const L=Ft(T);return n(4,E=(L==null?void 0:L.zappee)===(t==null?void 0:t.hexpubkey)),((L==null?void 0:L.amount)||0)/1e3}).reduce((T,L)=>T+L,0))},[t,c,u,k,E,d,b,a,f,r,m,p]}class Xn extends oe{constructor(e){super(),ae(this,e,Jn,Yn,ie,{listId:7,nip19:8})}}function Qn(s){var f;let e,n,t,r=(((f=s[0])==null?void 0:f.length)>0?s[0].length:0)+"",l,i,o,a;return n=new In({props:{strokeWidth:"1.5",class:(s[1]?"fill-red-500 stroke-red-500":"stroke-gray-500")+" hover:fill-red-500 hover:stroke-black w-4 lg:w-5 h-4 lg:h-5"}}),{c(){e=P("button"),R(n.$$.fragment),t=B(),l=K(r),this.h()},l(c){e=O(c,"BUTTON",{class:!0});var u=W(e);V(n.$$.fragment,u),t=j(u),l=G(u,r),u.forEach(_),this.h()},h(){$(e,"class","flex flex-row gap-1 items-center text-sm lg:text-base")},m(c,u){D(c,e,u),z(n,e,null),g(e,t),g(e,l),i=!0,o||(a=se(e,"click",s[3]),o=!0)},p(c,[u]){var E;const k={};u&2&&(k.class=(c[1]?"fill-red-500 stroke-red-500":"stroke-gray-500")+" hover:fill-red-500 hover:stroke-black w-4 lg:w-5 h-4 lg:h-5"),n.$set(k),(!i||u&1)&&r!==(r=(((E=c[0])==null?void 0:E.length)>0?c[0].length:0)+"")&&be(l,r)},i(c){i||(y(n.$$.fragment,c),i=!0)},o(c){M(n.$$.fragment,c),i=!1},d(c){c&&_(e),F(n),o=!1,a()}}}function xn(s,e,n){let t,r,l,i=ve,o=()=>(i(),i=Bt(c,k=>n(0,l=k)),c);ge(s,we,k=>n(5,t=k)),ge(s,ke,k=>n(6,r=k)),s.$$.on_destroy.push(()=>i());let{listId:a}=e,f,c;Pt(()=>{o(n(2,c=r.storeSubscribe({kinds:[Xe.Reaction],"#a":[a]},{closeOnEose:!1})))}),Ot(()=>c==null?void 0:c.unsubscribe()),Dt(()=>c==null?void 0:c.unsubscribe()),Ye(()=>{o(n(2,c=r.storeSubscribe({kinds:[Xe.Reaction],"#a":[a]},{closeOnEose:!1})))});function u(){if(!r.signer){const k=new Ue;ze(ke,r.signer=k,r)}f||new Ct(r,{kind:7,content:"+",pubkey:t==null?void 0:t.hexpubkey,created_at:Fe(),tags:[["e",a],["a",a],["p",t==null?void 0:t.hexpubkey]]}).publish().then(()=>{n(1,f=!0)}).catch(E=>{console.error(E)})}return s.$$set=k=>{"listId"in k&&n(4,a=k.listId)},s.$$.update=()=>{s.$$.dirty&33&&n(1,f=l==null?void 0:l.map(k=>k.pubkey).includes(t==null?void 0:t.hexpubkey))},[l,f,c,u,a,t]}class el extends oe{constructor(e){super(),ae(this,e,xn,Qn,ie,{listId:4})}}function tl(s){let e,n,t,r,l,i,o,a,f,c,u,k,E,d,b,m;return k=new Ut({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),{c(){e=P("div"),n=P("form"),t=P("label"),r=K(`Name *
                `),l=P("input"),i=B(),o=P("label"),a=K(`Description *
                `),f=P("input"),c=B(),u=P("button"),R(k.$$.fragment),E=K(`
                Fork this list`),this.h()},l(p){e=O(p,"DIV",{class:!0});var T=W(e);n=O(T,"FORM",{class:!0});var L=W(n);t=O(L,"LABEL",{for:!0,class:!0});var C=W(t);r=G(C,`Name *
                `),l=O(C,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),C.forEach(_),i=j(L),o=O(L,"LABEL",{for:!0});var Q=W(o);a=G(Q,`Description *
                `),f=O(Q,"INPUT",{type:!0,name:!0,class:!0,placeholder:!0}),Q.forEach(_),c=j(L),u=O(L,"BUTTON",{type:!0,class:!0});var ne=W(u);V(k.$$.fragment,ne),E=G(ne,`
                Fork this list`),ne.forEach(_),L.forEach(_),T.forEach(_),this.h()},h(){$(l,"type","text"),$(l,"name","name"),$(l,"class","rounded-md bg-transparent w-full text-sm"),$(l,"placeholder","A name for your list"),l.required=!0,$(t,"for","name"),$(t,"class","w-full"),$(f,"type","text"),$(f,"name","description"),$(f,"class","rounded-md bg-transparent w-full text-sm"),$(f,"placeholder","A short description for your list"),f.required=!0,$(o,"for","description"),$(u,"type","submit"),$(u,"class","w-full flex flex-row items-center mt-2 gap-1 rounded-md p-2 text-sm font-semibold leading-6 text-gray-200 bg-indigo-600 hover:bg-indigo-500 hover:text-white"),$(n,"class","flex flex-col gap-2 justify-start items-start"),$(e,"class","panel-contents flex flex-col gap-2")},m(p,T){D(p,e,T),g(e,n),g(n,t),g(t,r),g(t,l),re(l,s[0]),g(n,i),g(n,o),g(o,a),g(o,f),re(f,s[1]),g(n,c),g(n,u),z(k,u,null),g(u,E),d=!0,b||(m=[se(l,"input",s[4]),se(f,"input",s[5]),se(n,"submit",He(s[2]))],b=!0)},p(p,T){T&1&&l.value!==p[0]&&re(l,p[0]),T&2&&f.value!==p[1]&&re(f,p[1])},i(p){d||(y(k.$$.fragment,p),d=!0)},o(p){M(k.$$.fragment,p),d=!1},d(p){p&&_(e),F(k),b=!1,We(m)}}}function nl(s){let e,n,t,r,l,i;return n=new Ut({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),l=new Ge({props:{title:"Fork this list (create a personal copy)",triggeredBy:"#forkButton",trigger:"click",placement:"left-end",$$slots:{default:[tl]},$$scope:{ctx:s}}}),{c(){e=P("button"),R(n.$$.fragment),t=K(`
    Fork`),r=B(),R(l.$$.fragment),this.h()},l(o){e=O(o,"BUTTON",{id:!0,class:!0});var a=W(e);V(n.$$.fragment,a),t=G(a,`
    Fork`),a.forEach(_),r=j(o),V(l.$$.fragment,o),this.h()},h(){$(e,"id","forkButton"),$(e,"class","primaryActionButton")},m(o,a){D(o,e,a),z(n,e,null),g(e,t),D(o,r,a),z(l,o,a),i=!0},p(o,[a]){const f={};a&259&&(f.$$scope={dirty:a,ctx:o}),l.$set(f)},i(o){i||(y(n.$$.fragment,o),y(l.$$.fragment,o),i=!0)},o(o){M(n.$$.fragment,o),M(l.$$.fragment,o),i=!1},d(o){o&&(_(e),_(r)),F(n),F(l,o)}}}function ll(s,e,n){let t,r;ge(s,we,u=>n(6,t=u)),ge(s,ke,u=>n(7,r=u));let{rawList:l}=e,i,o;async function a(){if(!r.signer){const d=new Ue;ze(ke,r.signer=d,r)}const u=l.tags.filter(d=>!["d","name","description"].includes(d[0])),k=St();u.push(["d",`listr-${k}`]);const E=new Ze(r,{pubkey:t.hexpubkey,kind:l.kind,content:"",created_at:Fe(),tags:u});E.name=i,E.description=o,E.publish().then(()=>Wt.success("New list created & published")).catch(d=>console.error("Error publishing list",d))}function f(){i=this.value,n(0,i)}function c(){o=this.value,n(1,o)}return s.$$set=u=>{"rawList"in u&&n(3,l=u.rawList)},[i,o,a,l,f,c]}class rl extends oe{constructor(e){super(),ae(this,e,ll,nl,ie,{rawList:3})}}function rt(s){let e,n,t,r,l,i;return n=new Cn({props:{strokeWidth:"1.5",size:"20",class:"stroke-gray-500 hover:stroke-black w-5 h-5"}}),{c(){e=P("button"),R(n.$$.fragment),t=K(`
        Delete list`),this.h()},l(o){e=O(o,"BUTTON",{class:!0});var a=W(e);V(n.$$.fragment,a),t=G(a,`
        Delete list`),a.forEach(_),this.h()},h(){$(e,"class","popoverActionButton")},m(o,a){D(o,e,a),z(n,e,null),g(e,t),r=!0,l||(i=se(e,"click",s[2]),l=!0)},p:ve,i(o){r||(y(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&_(e),F(n),l=!1,i()}}}function sl(s){var r;let e,n,t=((r=s[1])==null?void 0:r.hexpubkey)===s[0]&&rt(s);return{c(){t&&t.c(),e=ee()},l(l){t&&t.l(l),e=ee()},m(l,i){t&&t.m(l,i),D(l,e,i),n=!0},p(l,[i]){var o;((o=l[1])==null?void 0:o.hexpubkey)===l[0]?t?(t.p(l,i),i&3&&y(t,1)):(t=rt(l),t.c(),y(t,1),t.m(e.parentNode,e)):t&&(ue(),M(t,1,1,()=>{t=null}),ce())},i(l){n||(y(t),n=!0)},o(l){M(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function il(s,e,n){let t,r;ge(s,we,f=>n(1,t=f)),ge(s,ke,f=>n(4,r=f));const l=Ke();let{listId:i}=e,{pubkey:o}=e;async function a(f){if(!r.signer){const u=new Ue;ze(ke,r.signer=u,r)}const c=new Ct(r,{kind:5,pubkey:t==null?void 0:t.hexpubkey,content:"List deleted by owner",tags:[["a",i]],created_at:Fe()});c.publish().then(()=>{qt.events.delete(i).catch(u=>console.error(u)),l("listDeleted",{event:c.rawEvent()}),xt(`/${t==null?void 0:t.npub}`)}).catch(u=>{console.error(u)})}return s.$$set=f=>{"listId"in f&&n(3,i=f.listId),"pubkey"in f&&n(0,o=f.pubkey)},[o,t,a,i]}class ol extends oe{constructor(e){super(),ae(this,e,il,sl,ie,{listId:3,pubkey:0})}}function st(s){let e,n,t,r;const l=[fl,al],i=[];function o(a,f){return a[1]?0:1}return e=o(s),n=i[e]=l[e](s),{c(){n.c(),t=ee()},l(a){n.l(a),t=ee()},m(a,f){i[e].m(a,f),D(a,t,f),r=!0},p(a,f){let c=e;e=o(a),e===c?i[e].p(a,f):(ue(),M(i[c],1,1,()=>{i[c]=null}),ce(),n=i[e],n?n.p(a,f):(n=i[e]=l[e](a),n.c()),y(n,1),n.m(t.parentNode,t))},i(a){r||(y(n),r=!0)},o(a){M(n),r=!1},d(a){a&&_(t),i[e].d(a)}}}function al(s){let e,n,t,r,l,i;return n=new sn({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),{c(){e=P("button"),R(n.$$.fragment),t=K(`
            Edit list`),this.h()},l(o){e=O(o,"BUTTON",{class:!0});var a=W(e);V(n.$$.fragment,a),t=G(a,`
            Edit list`),a.forEach(_),this.h()},h(){$(e,"class","primaryActionButton")},m(o,a){D(o,e,a),z(n,e,null),g(e,t),r=!0,l||(i=se(e,"click",s[5]),l=!0)},p:ve,i(o){r||(y(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&_(e),F(n),l=!1,i()}}}function fl(s){let e,n,t,r,l,i;return n=new cn({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),{c(){e=P("button"),R(n.$$.fragment),t=K(`
            Stop editing`),this.h()},l(o){e=O(o,"BUTTON",{class:!0});var a=W(e);V(n.$$.fragment,a),t=G(a,`
            Stop editing`),a.forEach(_),this.h()},h(){$(e,"class","primaryActionButton")},m(o,a){D(o,e,a),z(n,e,null),g(e,t),r=!0,l||(i=se(e,"click",s[4]),l=!0)},p:ve,i(o){r||(y(n.$$.fragment,o),r=!0)},o(o){M(n.$$.fragment,o),r=!1},d(o){o&&_(e),F(n),l=!1,i()}}}function ul(s){var r;let e,n,t=((r=s[2])==null?void 0:r.hexpubkey)===s[0]&&st(s);return{c(){t&&t.c(),e=ee()},l(l){t&&t.l(l),e=ee()},m(l,i){t&&t.m(l,i),D(l,e,i),n=!0},p(l,[i]){var o;((o=l[2])==null?void 0:o.hexpubkey)===l[0]?t?(t.p(l,i),i&5&&y(t,1)):(t=st(l),t.c(),y(t,1),t.m(e.parentNode,e)):t&&(ue(),M(t,1,1,()=>{t=null}),ce())},i(l){n||(y(t),n=!0)},o(l){M(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function cl(s,e,n){let t;ge(s,we,f=>n(2,t=f));const r=Ke();let{pubkey:l}=e,{editMode:i}=e;const o=()=>r("toggleEditMode"),a=()=>r("toggleEditMode");return s.$$set=f=>{"pubkey"in f&&n(0,l=f.pubkey),"editMode"in f&&n(1,i=f.editMode)},[l,i,t,r,o,a]}class dl extends oe{constructor(e){super(),ae(this,e,cl,ul,ie,{pubkey:0,editMode:1})}}function it(s){let e,n,t,r,l,i=s[5]&&s[2]!==s[5].hexpubkey&&Qe.includes(s[6]),o,a,f,c,u,k,E,d;n=new Xn({props:{nip19:s[0],listId:s[1]}}),r=new el({props:{listId:s[1]}});let b=i&&ot(s);return a=new dl({props:{pubkey:s[2],editMode:s[4]}}),a.$on("toggleEditMode",s[7]),u=new Kt({props:{strokeWidth:"1.5",size:"20",class:"stroke-gray-500 hover:stroke-black w-5 h-5"}}),E=new Ge({props:{triggeredBy:"#listActionsButton",placement:"left-start",$$slots:{default:[ml]},$$scope:{ctx:s}}}),{c(){e=P("div"),R(n.$$.fragment),t=B(),R(r.$$.fragment),l=B(),b&&b.c(),o=B(),R(a.$$.fragment),f=B(),c=P("button"),R(u.$$.fragment),k=B(),R(E.$$.fragment),this.h()},l(m){e=O(m,"DIV",{class:!0});var p=W(e);V(n.$$.fragment,p),t=j(p),V(r.$$.fragment,p),l=j(p),b&&b.l(p),o=j(p),V(a.$$.fragment,p),f=j(p),c=O(p,"BUTTON",{id:!0,class:!0});var T=W(c);V(u.$$.fragment,T),T.forEach(_),k=j(p),V(E.$$.fragment,p),p.forEach(_),this.h()},h(){$(c,"id","listActionsButton"),$(c,"class","lg:ml-auto"),$(e,"class","lg:ml-auto w-full lg:w-auto flex flex-row gap-2 lg:gap-4 items-center justify-between")},m(m,p){D(m,e,p),z(n,e,null),g(e,t),z(r,e,null),g(e,l),b&&b.m(e,null),g(e,o),z(a,e,null),g(e,f),g(e,c),z(u,c,null),g(e,k),z(E,e,null),d=!0},p(m,p){const T={};p&1&&(T.nip19=m[0]),p&2&&(T.listId=m[1]),n.$set(T);const L={};p&2&&(L.listId=m[1]),r.$set(L),p&36&&(i=m[5]&&m[2]!==m[5].hexpubkey&&Qe.includes(m[6])),i?b?(b.p(m,p),p&36&&y(b,1)):(b=ot(m),b.c(),y(b,1),b.m(e,o)):b&&(ue(),M(b,1,1,()=>{b=null}),ce());const C={};p&4&&(C.pubkey=m[2]),p&16&&(C.editMode=m[4]),a.$set(C);const Q={};p&263&&(Q.$$scope={dirty:p,ctx:m}),E.$set(Q)},i(m){d||(y(n.$$.fragment,m),y(r.$$.fragment,m),y(b),y(a.$$.fragment,m),y(u.$$.fragment,m),y(E.$$.fragment,m),d=!0)},o(m){M(n.$$.fragment,m),M(r.$$.fragment,m),M(b),M(a.$$.fragment,m),M(u.$$.fragment,m),M(E.$$.fragment,m),d=!1},d(m){m&&_(e),F(n),F(r),b&&b.d(),F(a),F(u),F(E)}}}function ot(s){let e,n;return e=new rl({props:{rawList:s[3]}}),{c(){R(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,r){z(e,t,r),n=!0},p(t,r){const l={};r&8&&(l.rawList=t[3]),e.$set(l)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function ml(s){let e,n,t,r,l;return n=new Qt({props:{nip19:s[0]}}),r=new ol({props:{listId:s[1],pubkey:s[2]}}),{c(){e=P("div"),R(n.$$.fragment),t=B(),R(r.$$.fragment),this.h()},l(i){e=O(i,"DIV",{class:!0});var o=W(e);V(n.$$.fragment,o),t=j(o),V(r.$$.fragment,o),o.forEach(_),this.h()},h(){$(e,"class","flex flex-col gap-2 items-start")},m(i,o){D(i,e,o),z(n,e,null),g(e,t),z(r,e,null),l=!0},p(i,o){const a={};o&1&&(a.nip19=i[0]),n.$set(a);const f={};o&2&&(f.listId=i[1]),o&4&&(f.pubkey=i[2]),r.$set(f)},i(i){l||(y(n.$$.fragment,i),y(r.$$.fragment,i),l=!0)},o(i){M(n.$$.fragment,i),M(r.$$.fragment,i),l=!1},d(i){i&&_(e),F(n),F(r)}}}function hl(s){let e,n,t=s[5]&&it(s);return{c(){t&&t.c(),e=ee()},l(r){t&&t.l(r),e=ee()},m(r,l){t&&t.m(r,l),D(r,e,l),n=!0},p(r,[l]){r[5]?t?(t.p(r,l),l&32&&y(t,1)):(t=it(r),t.c(),y(t,1),t.m(e.parentNode,e)):t&&(ue(),M(t,1,1,()=>{t=null}),ce())},i(r){n||(y(t),n=!0)},o(r){M(t),n=!1},d(r){r&&_(e),t&&t.d(r)}}}function gl(s,e,n){let t;ge(s,we,u=>n(5,t=u));let{nip19:r}=e,{listId:l}=e,{pubkey:i}=e,{rawList:o}=e,{editMode:a}=e;const f=o.kind;function c(u){jt.call(this,s,u)}return s.$$set=u=>{"nip19"in u&&n(0,r=u.nip19),"listId"in u&&n(1,l=u.listId),"pubkey"in u&&n(2,i=u.pubkey),"rawList"in u&&n(3,o=u.rawList),"editMode"in u&&n(4,a=u.editMode)},[r,l,i,o,a,t,f,c]}class pl extends oe{constructor(e){super(),ae(this,e,gl,hl,ie,{nip19:0,listId:1,pubkey:2,rawList:3,editMode:4})}}function at(s){let e,n;return{c(){e=P("span"),n=K(s[4]),this.h()},l(t){e=O(t,"SPAN",{class:!0});var r=W(e);n=G(r,s[4]),r.forEach(_),this.h()},h(){$(e,"class","text-sm text-red-600 italic")},m(t,r){D(t,e,r),g(e,n)},p(t,r){r&16&&be(n,t[4])},d(t){t&&_(e)}}}function _l(s){let e,n,t="Add an item to this list",r,l,i,o,a,f,c="Public",u,k="Private",E,d,b,m,p,T="Add to list",L,C,Q,ne,S;b=new Gt({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}});let X=s[3]&&at(s);return{c(){e=P("form"),n=P("h3"),n.textContent=t,r=B(),l=P("div"),i=P("input"),o=B(),a=P("select"),f=P("option"),f.textContent=c,u=P("option"),u.textContent=k,E=B(),d=P("button"),R(b.$$.fragment),m=B(),p=P("div"),p.textContent=T,L=B(),X&&X.c(),C=ee(),this.h()},l(q){e=O(q,"FORM",{class:!0});var N=W(e);n=O(N,"H3",{class:!0,"data-svelte-h":!0}),ye(n)!=="svelte-1i33xtm"&&(n.textContent=t),r=j(N),l=O(N,"DIV",{class:!0});var U=W(l);i=O(U,"INPUT",{type:!0,id:!0,name:!0,tabindex:!0,placeholder:!0,class:!0}),o=j(U),a=O(U,"SELECT",{id:!0,name:!0,tabindex:!0,class:!0});var Z=W(a);f=O(Z,"OPTION",{"data-svelte-h":!0}),ye(f)!=="svelte-56kvny"&&(f.textContent=c),u=O(Z,"OPTION",{"data-svelte-h":!0}),ye(u)!=="svelte-1biwgrw"&&(u.textContent=k),Z.forEach(_),E=j(U),d=O(U,"BUTTON",{tabindex:!0,class:!0});var H=W(d);V(b.$$.fragment,H),m=j(H),p=O(H,"DIV",{"data-svelte-h":!0}),ye(p)!=="svelte-1h8qy7m"&&(p.textContent=T),H.forEach(_),U.forEach(_),N.forEach(_),L=j(q),X&&X.l(q),C=ee(),this.h()},h(){$(n,"class","font-medium"),$(i,"type","text"),$(i,"id","listItem"),$(i,"name","listItem"),$(i,"tabindex","0"),$(i,"placeholder","Identifier (npub..., nprofile..., note..., nevent..., or naddr...)"),$(i,"class","border-gray-400 w-full lg:w-auto rounded-md grow disabled:border-gray-200 disabled:bg-gray-100"),i.required=!0,f.__value="public",re(f,f.__value),u.__value="private",re(u,u.__value),$(a,"id","listItemType"),$(a,"name","listItemType"),$(a,"tabindex","0"),$(a,"class","border-gray-400 rounded-md w-full lg:w-auto"),s[1]===void 0&&At(()=>s[7].call(a)),$(d,"tabindex","0"),$(d,"class","w-full lg:w-auto justify-center lg:justify-start flex flex-row gap-1 items-center border border-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-md p-2 px-3 disabled:border-gray-200 disabled:bg-gray-100 disabled:hover:bg-gray-100 disabled:text-gray-500"),d.disabled=s[2],$(l,"class","flex flex-col lg:flex-row gap-2 items-center my-2 mb-6"),$(e,"class","mt-2")},m(q,N){D(q,e,N),g(e,n),g(e,r),g(e,l),g(l,i),re(i,s[0]),g(l,o),g(l,a),g(a,f),g(a,u),et(a,s[1],!0),g(l,E),g(l,d),z(b,d,null),g(d,m),g(d,p),D(q,L,N),X&&X.m(q,N),D(q,C,N),Q=!0,ne||(S=[se(i,"input",s[6]),se(a,"change",s[7]),se(d,"click",He(s[5]))],ne=!0)},p(q,[N]){N&1&&i.value!==q[0]&&re(i,q[0]),N&2&&et(a,q[1]),(!Q||N&4)&&(d.disabled=q[2]),q[3]?X?X.p(q,N):(X=at(q),X.c(),X.m(C.parentNode,C)):X&&(X.d(1),X=null)},i(q){Q||(y(b.$$.fragment,q),Q=!0)},o(q){M(b.$$.fragment,q),Q=!1},d(q){q&&(_(e),_(L),_(C)),F(b),X&&X.d(q),ne=!1,We(S)}}}function bl(s,e,n){const t=Ke();let r,l="public",i=!1,o=!1,a="";function f(){if(n(2,i=!0),n(3,o=!1),n(4,a=""),r.match(Yt)){const k=Jt(r);t("addListItem",{tag:k,type:l})}else n(3,o=!0),n(4,a="Please enter a valid NIP-19 identifier");n(0,r=""),n(1,l="public"),n(2,i=!1)}function c(){r=this.value,n(0,r)}function u(){l=Ht(this),n(1,l)}return[r,l,i,o,a,f,c,u]}class kl extends oe{constructor(e){super(),ae(this,e,bl,_l,ie,{})}}function ft(s){let e;return{c(){e=K("Name updated")},l(n){e=G(n,"Name updated")},m(n,t){D(n,e,t)},d(n){n&&_(e)}}}function ut(s){let e;return{c(){e=K("/")},l(n){e=G(n,"/")},m(n,t){D(n,e,t)},d(n){n&&_(e)}}}function ct(s){let e;return{c(){e=K("Description updated")},l(n){e=G(n,"Description updated")},m(n,t){D(n,e,t)},d(n){n&&_(e)}}}function dt(s){let e;return{c(){e=K("/")},l(n){e=G(n,"/")},m(n,t){D(n,e,t)},d(n){n&&_(e)}}}function mt(s){let e=s[0].length+"",n,t,r=s[0].length===1?"addition":"additions",l;return{c(){n=K(e),t=B(),l=K(r)},l(i){n=G(i,e),t=j(i),l=G(i,r)},m(i,o){D(i,n,o),D(i,t,o),D(i,l,o)},p(i,o){o&1&&e!==(e=i[0].length+"")&&be(n,e),o&1&&r!==(r=i[0].length===1?"addition":"additions")&&be(l,r)},d(i){i&&(_(n),_(t),_(l))}}}function ht(s){let e;return{c(){e=K("/")},l(n){e=G(n,"/")},m(n,t){D(n,e,t)},d(n){n&&_(e)}}}function gt(s){let e=s[1].length+"",n,t,r=s[1].length===1?"removal":"removals",l;return{c(){n=K(e),t=B(),l=K(r)},l(i){n=G(i,e),t=j(i),l=G(i,r)},m(i,o){D(i,n,o),D(i,t,o),D(i,l,o)},p(i,o){o&2&&e!==(e=i[1].length+"")&&be(n,e),o&2&&r!==(r=i[1].length===1?"removal":"removals")&&be(l,r)},d(i){i&&(_(n),_(t),_(l))}}}function vl(s){let e,n,t,r,l,i,o,a=s[2]&&ft(),f=s[2]&&s[3]&&ut(),c=s[3]&&ct(),u=(s[2]||s[3])&&(s[0].length>0||s[1].length>0)&&dt(),k=s[0].length>0&&mt(s),E=s[0].length>0&&s[1].length>0&&ht(),d=s[1].length>0&&gt(s);return{c(){e=P("div"),a&&a.c(),n=B(),f&&f.c(),t=B(),c&&c.c(),r=B(),u&&u.c(),l=B(),k&&k.c(),i=B(),E&&E.c(),o=B(),d&&d.c(),this.h()},l(b){e=O(b,"DIV",{class:!0});var m=W(e);a&&a.l(m),n=j(m),f&&f.l(m),t=j(m),c&&c.l(m),r=j(m),u&&u.l(m),l=j(m),k&&k.l(m),i=j(m),E&&E.l(m),o=j(m),d&&d.l(m),m.forEach(_),this.h()},h(){$(e,"class","text-sm")},m(b,m){D(b,e,m),a&&a.m(e,null),g(e,n),f&&f.m(e,null),g(e,t),c&&c.m(e,null),g(e,r),u&&u.m(e,null),g(e,l),k&&k.m(e,null),g(e,i),E&&E.m(e,null),g(e,o),d&&d.m(e,null)},p(b,[m]){b[2]?a||(a=ft(),a.c(),a.m(e,n)):a&&(a.d(1),a=null),b[2]&&b[3]?f||(f=ut(),f.c(),f.m(e,t)):f&&(f.d(1),f=null),b[3]?c||(c=ct(),c.c(),c.m(e,r)):c&&(c.d(1),c=null),(b[2]||b[3])&&(b[0].length>0||b[1].length>0)?u||(u=dt(),u.c(),u.m(e,l)):u&&(u.d(1),u=null),b[0].length>0?k?k.p(b,m):(k=mt(b),k.c(),k.m(e,i)):k&&(k.d(1),k=null),b[0].length>0&&b[1].length>0?E||(E=ht(),E.c(),E.m(e,o)):E&&(E.d(1),E=null),b[1].length>0?d?d.p(b,m):(d=gt(b),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:ve,o:ve,d(b){b&&_(e),a&&a.d(),f&&f.d(),c&&c.d(),u&&u.d(),k&&k.d(),E&&E.d(),d&&d.d()}}}function $l(s,e,n){let{additions:t}=e,{removals:r}=e,{nameChanged:l}=e,{descriptionChanged:i}=e;return s.$$set=o=>{"additions"in o&&n(0,t=o.additions),"removals"in o&&n(1,r=o.removals),"nameChanged"in o&&n(2,l=o.nameChanged),"descriptionChanged"in o&&n(3,i=o.descriptionChanged)},[t,r,l,i]}class wl extends oe{constructor(e){super(),ae(this,e,$l,vl,ie,{additions:0,removals:1,nameChanged:2,descriptionChanged:3})}}function pt(s,e,n){const t=s.slice();return t[23]=e[n],t}function _t(s,e,n){const t=s.slice();return t[23]=e[n],t}function bt(s,e,n){const t=s.slice();return t[23]=e[n],t}function kt(s,e,n){const t=s.slice();return t[23]=e[n],t}function vt(s,e,n){const t=s.slice();return t[23]=e[n],t}function $t(s,e,n){const t=s.slice();return t[23]=e[n],t}function El(s){let e,n=s[0].kind+"",t;return{c(){e=K("Kind: "),t=K(n)},l(r){e=G(r,"Kind: "),t=G(r,n)},m(r,l){D(r,e,l),D(r,t,l)},p(r,l){l[0]&1&&n!==(n=r[0].kind+"")&&be(t,n)},d(r){r&&(_(e),_(t))}}}function wt(s){let e,n,t,r="Name",l,i,o,a,f="Description",c,u,k,E,d,b,m,p;return E=new kl({}),E.$on("addListItem",s[13]),{c(){e=P("div"),n=P("form"),t=P("label"),t.textContent=r,l=B(),i=P("input"),o=B(),a=P("label"),a.textContent=f,c=B(),u=P("input"),k=B(),R(E.$$.fragment),this.h()},l(T){e=O(T,"DIV",{});var L=W(e);n=O(L,"FORM",{class:!0});var C=W(n);t=O(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ye(t)!=="svelte-1r16iny"&&(t.textContent=r),l=j(C),i=O(C,"INPUT",{type:!0,name:!0,class:!0}),o=j(C),a=O(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ye(a)!=="svelte-9njb56"&&(a.textContent=f),c=j(C),u=O(C,"INPUT",{type:!0,name:!0,class:!0}),C.forEach(_),k=j(L),V(E.$$.fragment,L),L.forEach(_),this.h()},h(){$(t,"for","listName"),$(t,"class","font-medium"),$(i,"type","text"),$(i,"name","listName"),$(i,"class","border-gray-400 col-span-2 rounded-md disabled:border-gray-200 disabled:bg-gray-100 text-sm"),$(a,"for","listDescription"),$(a,"class","font-medium"),$(u,"type","text"),$(u,"name","listDescription"),$(u,"class","border-gray-400 col-span-2 rounded-md disabled:border-gray-200 disabled:bg-gray-100 text-sm"),$(n,"class","flex flex-col gap-2")},m(T,L){D(T,e,L),g(e,n),g(n,t),g(n,l),g(n,i),re(i,s[5]),g(n,o),g(n,a),g(n,c),g(n,u),re(u,s[6]),g(e,k),z(E,e,null),b=!0,m||(p=[se(i,"input",s[19]),se(u,"input",s[20])],m=!0)},p(T,L){L[0]&32&&i.value!==T[5]&&re(i,T[5]),L[0]&64&&u.value!==T[6]&&re(u,T[6])},i(T){b||(y(E.$$.fragment,T),T&&At(()=>{b&&(d||(d=tt(e,lt,{easing:nt},!0)),d.run(1))}),b=!0)},o(T){M(E.$$.fragment,T),T&&(d||(d=tt(e,lt,{easing:nt},!1)),d.run(0)),b=!1},d(T){T&&_(e),F(E),T&&d&&d.end(),m=!1,We(p)}}}function Et(s){let e,n,t="Unpublished changes",r,l,i,o,a,f,c,u,k,E,d=[],b=new Map,m,p=[],T=new Map,L,C=[],Q=new Map,ne,S=[],X=new Map,q,N,U;i=new wl({props:{nameChanged:s[5]!==s[0].name,descriptionChanged:s[6]!==s[0].description,additions:[...s[1],...s[2]],removals:[...s[3],...s[4]]}}),f=new vn({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}});let Z=he(s[2]);const H=v=>v[23][1];for(let v=0;v<Z.length;v+=1){let h=$t(s,Z,v),A=H(h);b.set(A,d[v]=yt(A,h))}let pe=he(s[1]);const me=v=>v[23][1];for(let v=0;v<pe.length;v+=1){let h=vt(s,pe,v),A=me(h);T.set(A,p[v]=It(A,h))}let Y=he(s[4]);const J=v=>v[23][1];for(let v=0;v<Y.length;v+=1){let h=kt(s,Y,v),A=J(h);Q.set(A,C[v]=Nt(A,h))}let _e=he(s[3]);const Ve=v=>v[23][1];for(let v=0;v<_e.length;v+=1){let h=bt(s,_e,v),A=Ve(h);X.set(A,S[v]=Mt(A,h))}return{c(){e=P("fieldset"),n=P("legend"),n.textContent=t,r=B(),l=P("div"),R(i.$$.fragment),o=B(),a=P("button"),R(f.$$.fragment),c=K(`
                    Publish now`),u=B(),k=P("div"),E=B();for(let v=0;v<d.length;v+=1)d[v].c();m=B();for(let v=0;v<p.length;v+=1)p[v].c();L=B();for(let v=0;v<C.length;v+=1)C[v].c();ne=B();for(let v=0;v<S.length;v+=1)S[v].c();this.h()},l(v){e=O(v,"FIELDSET",{class:!0});var h=W(e);n=O(h,"LEGEND",{class:!0,"data-svelte-h":!0}),ye(n)!=="svelte-1a4o6u6"&&(n.textContent=t),r=j(h),l=O(h,"DIV",{class:!0});var A=W(l);V(i.$$.fragment,A),o=j(A),a=O(A,"BUTTON",{class:!0});var I=W(a);V(f.$$.fragment,I),c=G(I,`
                    Publish now`),I.forEach(_),A.forEach(_),u=j(h),k=O(h,"DIV",{class:!0}),W(k).forEach(_),E=j(h);for(let w=0;w<d.length;w+=1)d[w].l(h);m=j(h);for(let w=0;w<p.length;w+=1)p[w].l(h);L=j(h);for(let w=0;w<C.length;w+=1)C[w].l(h);ne=j(h);for(let w=0;w<S.length;w+=1)S[w].l(h);h.forEach(_),this.h()},h(){$(n,"class","text-orange-800"),a.disabled=s[10],$(a,"class","flex flex-row gap-2 justify-center items-center border border-orange-500 bg-orange-100 hover:bg-orange-200 p-2 px-3 rounded-md text-sm lg:text-base disabled:border-gray-200 disabled:bg-gray-100 disabled:hover:bg-gray-100 disabled:text-gray-500"),$(l,"class","flex flex-col lg:flex-row gap-4 lg:items-center justify-end"),$(k,"class","flex flex-col gap-1"),$(e,"class","border border-orange-800 rounded-md p-2")},m(v,h){D(v,e,h),g(e,n),g(e,r),g(e,l),z(i,l,null),g(l,o),g(l,a),z(f,a,null),g(a,c),g(e,u),g(e,k),g(e,E);for(let A=0;A<d.length;A+=1)d[A]&&d[A].m(e,null);g(e,m);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(e,null);g(e,L);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(e,null);g(e,ne);for(let A=0;A<S.length;A+=1)S[A]&&S[A].m(e,null);q=!0,N||(U=se(a,"click",s[16]),N=!0)},p(v,h){const A={};h[0]&33&&(A.nameChanged=v[5]!==v[0].name),h[0]&65&&(A.descriptionChanged=v[6]!==v[0].description),h[0]&6&&(A.additions=[...v[1],...v[2]]),h[0]&24&&(A.removals=[...v[3],...v[4]]),i.$set(A),(!q||h[0]&1024)&&(a.disabled=v[10]),h[0]&32772&&(Z=he(v[2]),ue(),d=Ae(d,h,H,1,v,Z,b,e,Se,yt,m,$t),ce()),h[0]&32770&&(pe=he(v[1]),ue(),p=Ae(p,h,me,1,v,pe,T,e,Se,It,L,vt),ce()),h[0]&32784&&(Y=he(v[4]),ue(),C=Ae(C,h,J,1,v,Y,Q,e,Se,Nt,ne,kt),ce()),h[0]&32776&&(_e=he(v[3]),ue(),S=Ae(S,h,Ve,1,v,_e,X,e,Se,Mt,null,bt),ce())},i(v){if(!q){y(i.$$.fragment,v),y(f.$$.fragment,v);for(let h=0;h<Z.length;h+=1)y(d[h]);for(let h=0;h<pe.length;h+=1)y(p[h]);for(let h=0;h<Y.length;h+=1)y(C[h]);for(let h=0;h<_e.length;h+=1)y(S[h]);q=!0}},o(v){M(i.$$.fragment,v),M(f.$$.fragment,v);for(let h=0;h<d.length;h+=1)M(d[h]);for(let h=0;h<p.length;h+=1)M(p[h]);for(let h=0;h<C.length;h+=1)M(C[h]);for(let h=0;h<S.length;h+=1)M(S[h]);q=!1},d(v){v&&_(e),F(i),F(f);for(let h=0;h<d.length;h+=1)d[h].d();for(let h=0;h<p.length;h+=1)p[h].d();for(let h=0;h<C.length;h+=1)C[h].d();for(let h=0;h<S.length;h+=1)S[h].d();N=!1,U()}}}function yt(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!0,unsaved:!0}}),t.$on("removeUnsavedItem",e[15]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&4&&(o.id=e[23][1]),i[0]&4&&(o.tag=e[23]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function It(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!1,unsaved:!0}}),t.$on("removeUnsavedItem",e[15]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&2&&(o.id=e[23][1]),i[0]&2&&(o.tag=e[23]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function Nt(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!0,unsaved:!0,removal:!0}}),t.$on("removeUnsavedItem",e[15]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&16&&(o.id=e[23][1]),i[0]&16&&(o.tag=e[23]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function Mt(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!1,unsaved:!0,removal:!0}}),t.$on("removeUnsavedItem",e[15]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&8&&(o.id=e[23][1]),i[0]&8&&(o.tag=e[23]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function Tt(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!0,unsaved:!1,editMode:e[11]}}),t.$on("removeItem",e[14]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&128&&(o.id=e[23][1]),i[0]&128&&(o.tag=e[23]),i[0]&2048&&(o.editMode=e[11]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function Lt(s,e){let n,t,r;return t=new Re({props:{id:e[23][1],tag:e[23],privateItem:!1,unsaved:!1,editMode:e[11]}}),t.$on("removeItem",e[14]),{key:s,first:null,c(){n=ee(),R(t.$$.fragment),this.h()},l(l){n=ee(),V(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){D(l,n,i),z(t,l,i),r=!0},p(l,i){e=l;const o={};i[0]&256&&(o.id=e[23][1]),i[0]&256&&(o.tag=e[23]),i[0]&2048&&(o.editMode=e[11]),t.$set(o)},i(l){r||(y(t.$$.fragment,l),r=!0)},o(l){M(t.$$.fragment,l),r=!1},d(l){l&&_(n),F(t,l)}}}function yl(s){var A;let e,n,t,r,l,i,o,a,f,c,u=s[0].itemCount+"",k,E,d,b,m=(s[6]?s[6]:"")+"",p,T,L,C,Q,ne,S,X,q,N=[],U=new Map,Z,H=[],pe=new Map,me;i=new Xt({props:{strokeWidth:"1.5",class:"w-4 lg:w-5 h-4 lg:h-5"}}),a=new Zt({props:{type:"light",$$slots:{default:[El]},$$scope:{ctx:s}}}),L=new pl({props:{nip19:s[0].nip19,pubkey:s[0].pubkey,listId:s[0].listId,rawList:s[0].rawList,editMode:s[11]}}),L.$on("listDeleted",s[18]),L.$on("toggleEditMode",s[17]);let Y=((A=s[12])==null?void 0:A.hexpubkey)===s[0].rawList.pubkey&&s[11]&&wt(s),J=s[9]&&Et(s),_e=he(s[7]||[]);const Ve=I=>I[23][1];for(let I=0;I<_e.length;I+=1){let w=_t(s,_e,I),x=Ve(w);U.set(x,N[I]=Tt(x,w))}let v=he(s[8]||[]);const h=I=>I[23][1];for(let I=0;I<v.length;I+=1){let w=pt(s,v,I),x=h(w);pe.set(x,H[I]=Lt(x,w))}return{c(){e=P("div"),n=P("div"),t=P("div"),r=K(s[5]),l=B(),R(i.$$.fragment),o=B(),R(a.$$.fragment),f=B(),c=P("span"),k=K(u),E=K(" items"),d=B(),b=P("span"),p=K(m),T=B(),R(L.$$.fragment),C=B(),Q=P("hr"),ne=B(),S=P("div"),Y&&Y.c(),X=B(),J&&J.c(),q=B();for(let I=0;I<N.length;I+=1)N[I].c();Z=B();for(let I=0;I<H.length;I+=1)H[I].c();this.h()},l(I){e=O(I,"DIV",{class:!0});var w=W(e);n=O(w,"DIV",{class:!0});var x=W(n);t=O(x,"DIV",{class:!0});var fe=W(t);r=G(fe,s[5]),l=j(fe),V(i.$$.fragment,fe),o=j(fe),V(a.$$.fragment,fe),f=j(fe),c=O(fe,"SPAN",{class:!0});var Be=W(c);k=G(Be,u),E=G(Be," items"),Be.forEach(_),fe.forEach(_),d=j(x),b=O(x,"SPAN",{class:!0});var Je=W(b);p=G(Je,m),Je.forEach(_),x.forEach(_),T=j(w),V(L.$$.fragment,w),w.forEach(_),C=j(I),Q=O(I,"HR",{}),ne=j(I),S=O(I,"DIV",{class:!0});var $e=W(S);Y&&Y.l($e),X=j($e),J&&J.l($e),q=j($e);for(let Ee=0;Ee<N.length;Ee+=1)N[Ee].l($e);Z=j($e);for(let Ee=0;Ee<H.length;Ee+=1)H[Ee].l($e);$e.forEach(_),this.h()},h(){$(c,"class","text-sm font-normal"),$(t,"class","text-base lg:text-lg font-bold flex flex-row justify-start items-center gap-2"),$(b,"class","italic text-sm"),$(n,"class","flex flex-col gap-1 w-full lg:w-auto"),$(e,"class","flex flex-col lg:flex-row gap-4 items-center justify-between"),$(S,"class","flex flex-col")},m(I,w){D(I,e,w),g(e,n),g(n,t),g(t,r),g(t,l),z(i,t,null),g(t,o),z(a,t,null),g(t,f),g(t,c),g(c,k),g(c,E),g(n,d),g(n,b),g(b,p),g(e,T),z(L,e,null),D(I,C,w),D(I,Q,w),D(I,ne,w),D(I,S,w),Y&&Y.m(S,null),g(S,X),J&&J.m(S,null),g(S,q);for(let x=0;x<N.length;x+=1)N[x]&&N[x].m(S,null);g(S,Z);for(let x=0;x<H.length;x+=1)H[x]&&H[x].m(S,null);me=!0},p(I,w){var Be;(!me||w[0]&32)&&be(r,I[5]);const x={};w[0]&1|w[1]&32&&(x.$$scope={dirty:w,ctx:I}),a.$set(x),(!me||w[0]&1)&&u!==(u=I[0].itemCount+"")&&be(k,u),(!me||w[0]&64)&&m!==(m=(I[6]?I[6]:"")+"")&&be(p,m);const fe={};w[0]&1&&(fe.nip19=I[0].nip19),w[0]&1&&(fe.pubkey=I[0].pubkey),w[0]&1&&(fe.listId=I[0].listId),w[0]&1&&(fe.rawList=I[0].rawList),w[0]&2048&&(fe.editMode=I[11]),L.$set(fe),((Be=I[12])==null?void 0:Be.hexpubkey)===I[0].rawList.pubkey&&I[11]?Y?(Y.p(I,w),w[0]&6145&&y(Y,1)):(Y=wt(I),Y.c(),y(Y,1),Y.m(S,X)):Y&&(ue(),M(Y,1,1,()=>{Y=null}),ce()),I[9]?J?(J.p(I,w),w[0]&512&&y(J,1)):(J=Et(I),J.c(),y(J,1),J.m(S,q)):J&&(ue(),M(J,1,1,()=>{J=null}),ce()),w[0]&18560&&(_e=he(I[7]||[]),ue(),N=Ae(N,w,Ve,1,I,_e,U,S,Se,Tt,Z,_t),ce()),w[0]&18688&&(v=he(I[8]||[]),ue(),H=Ae(H,w,h,1,I,v,pe,S,Se,Lt,null,pt),ce())},i(I){if(!me){y(i.$$.fragment,I),y(a.$$.fragment,I),y(L.$$.fragment,I),y(Y),y(J);for(let w=0;w<_e.length;w+=1)y(N[w]);for(let w=0;w<v.length;w+=1)y(H[w]);me=!0}},o(I){M(i.$$.fragment,I),M(a.$$.fragment,I),M(L.$$.fragment,I),M(Y),M(J);for(let w=0;w<N.length;w+=1)M(N[w]);for(let w=0;w<H.length;w+=1)M(H[w]);me=!1},d(I){I&&(_(e),_(C),_(Q),_(ne),_(S)),F(i),F(a),F(L),Y&&Y.d(),J&&J.d();for(let w=0;w<N.length;w+=1)N[w].d();for(let w=0;w<H.length;w+=1)H[w].d()}}}function Il(s,e,n){let t,r;ge(s,we,N=>n(12,t=N)),ge(s,ke,N=>n(21,r=N));let{data:l}=e,i=l.privateItems||[],o=l.items,a=[],f=[],c=[],u=[],k=!1,E=!1,d=!1,b=l.name,m=l.description;en(()=>{k&&confirm("You have unpublished changes. Are you sure you want to leave the page?")}),Ye(()=>p());function p(){n(7,i=l.privateItems||[]),n(8,o=l.items),n(1,a=[]),n(2,f=[]),n(3,c=[]),n(4,u=[]),n(5,b=l.name),n(6,m=l.description)}function T(N){N.detail.type==="public"?(a.push(N.detail.tag),n(1,a)):N.detail.type==="private"&&(f.push(N.detail.tag),n(2,f))}function L(N){let U=[N.detail.type,N.detail.id];N.detail.otherTagValues&&(U=[...U,...N.detail.otherTagValues]),N.detail.privateItem?(u.push(U),n(4,u),n(7,i=i==null?void 0:i.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1])))):(c.push(U),n(3,c),n(8,o=o.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1]))))}function C(N){let U=[N.detail.type,N.detail.id];N.detail.otherTagValues&&(U=[...U,...N.detail.otherTagValues]),N.detail.privateItem?N.detail.removal?(n(7,i=[U,...i]),n(4,u=u.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1])))):n(2,f=f.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1]))):N.detail.removal?(n(8,o=[U,...o]),n(3,c=c.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1])))):n(1,a=a.filter(Z=>!(Z[0]===U[0]&&Z[1]===U[1])))}async function Q(){n(10,E=!0);const N=new Ue;ze(ke,r.signer=N,r);const U=[...i,...f];let Z="";U.length>0&&(Z=JSON.stringify(U));const H=new Ze(r,{kind:l.rawList.kind,pubkey:l.pubkey,created_at:Fe(),content:Z,tags:[...o,...a]});H.name=b,H.description=m;let pe=!0;if(H.kind>=3e4&&H.kind<=4e4){const Y=l.rawList.tags.filter(J=>J[0]==="d")[0][1];if(Y===H.name){pe=confirm(`Updating this list will upgrade the format of the list to allow editing the list name going forward. Do you want to proceed?

We suggest deleting the original list after the new list is created.`);const J=St();H.tags.push(["d",`listr-${J}`])}else H.tags.push(["d",Y])}if(U.length>0&&await H.encrypt(t),pe)return await H.publish().catch(me=>{me==="User rejected"&&(console.log("Rejected"),n(10,E=!1))}),n(10,E=!1),p(),H.encode();n(10,E=!1)}function ne(){let N=!0;d&&k&&(N=confirm("You have unpublished changes that will be discarded. Are you sure you want to stop editing?")),N&&(n(11,d=!d),p())}function S(N){jt.call(this,s,N)}function X(){b=this.value,n(5,b)}function q(){m=this.value,n(6,m)}return s.$$set=N=>{"data"in N&&n(0,l=N.data)},s.$$.update=()=>{s.$$.dirty[0]&127&&n(9,k=f.length>0||u.length>0||a.length>0||c.length>0||b!==l.name||m!==l.description)},[l,a,f,c,u,b,m,i,o,k,E,d,t,T,L,C,Q,ne,S,X,q]}class Bl extends oe{constructor(e){super(),ae(this,e,Il,yl,ie,{data:0},null,[-1,-1])}}export{Bl as component,Dl as universal};
