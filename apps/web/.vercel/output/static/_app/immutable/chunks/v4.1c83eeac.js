import{s as R,A as ie,B as De,r as Pe,u as je,v as ze,w as qe,e as O,i as A,d as _,f as w,l as H,g as B,h as V,m as W,j as E,x as b,y as N,a as T,c as U,T as it,n as ne,X as se,H as K,E as le,a3 as at,a4 as st,L as ft,J as ot,U as Sn,z as Le}from"./scheduler.d926ef25.js";import{S as G,i as X,b as $,d as I,m as y,a as d,t as D,e as M,g as q,c as L,f as ht}from"./index.d0db5775.js";import{I as Re,g as He,a as We,q as ge,w as Vn,x as Tn,A as dn,d as Ke,e as fe,G as rt,k as Dn,o as _n,H as nt,J as Se,N as Ve,T as Ge,n as Xe,r as vt}from"./currentUserFollows.1b7aaca4.js";import{P as Un,c as On,b as Pn,d as jn,U as hn,F as zn,A as qn}from"./UserDetails.9d64d9ac.js";import"./singletons.b04f799c.js";import{X as vn,e as gt,a as Ft}from"./index.9af295b1.js";function Ln(l){let e;const n=l[2].default,t=Pe(n,l,l[3],null);return{c(){t&&t.c()},l(u){t&&t.l(u)},m(u,r){t&&t.m(u,r),e=!0},p(u,r){t&&t.p&&(!e||r&8)&&je(t,n,u,u[3],e?qe(n,u[3],r,null):ze(u[3]),null)},i(u){e||(d(t,u),e=!0)},o(u){D(t,u),e=!1},d(u){t&&t.d(u)}}}function Rn(l){let e,n;const t=[{name:"check"},l[1],{iconNode:l[0]}];let u={$$slots:{default:[Ln]},$$scope:{ctx:l}};for(let r=0;r<t.length;r+=1)u=ie(u,t[r]);return e=new Re({props:u}),{c(){$(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){y(e,r,i),n=!0},p(r,[i]){const a=i&3?He(t,[t[0],i&2&&We(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Hn(l,e,n){let{$$slots:t={},$$scope:u}=e;const r=[["polyline",{points:"20 6 9 17 4 12"}]];return l.$$set=i=>{n(1,e=ie(ie({},e),De(i))),"$$scope"in i&&n(3,u=i.$$scope)},e=De(e),[r,e,t,u]}class Wn extends G{constructor(e){super(),X(this,e,Hn,Rn,R,{})}}const ki=Wn;function Kn(l){let e;const n=l[2].default,t=Pe(n,l,l[3],null);return{c(){t&&t.c()},l(u){t&&t.l(u)},m(u,r){t&&t.m(u,r),e=!0},p(u,r){t&&t.p&&(!e||r&8)&&je(t,n,u,u[3],e?qe(n,u[3],r,null):ze(u[3]),null)},i(u){e||(d(t,u),e=!0)},o(u){D(t,u),e=!1},d(u){t&&t.d(u)}}}function Gn(l){let e,n;const t=[{name:"external-link"},l[1],{iconNode:l[0]}];let u={$$slots:{default:[Kn]},$$scope:{ctx:l}};for(let r=0;r<t.length;r+=1)u=ie(u,t[r]);return e=new Re({props:u}),{c(){$(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){y(e,r,i),n=!0},p(r,[i]){const a=i&3?He(t,[t[0],i&2&&We(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Xn(l,e,n){let{$$slots:t={},$$scope:u}=e;const r=[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}],["polyline",{points:"15 3 21 3 21 9"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3"}]];return l.$$set=i=>{n(1,e=ie(ie({},e),De(i))),"$$scope"in i&&n(3,u=i.$$scope)},e=De(e),[r,e,t,u]}class Jn extends G{constructor(e){super(),X(this,e,Xn,Gn,R,{})}}const Yn=Jn;function Zn(l){let e;const n=l[2].default,t=Pe(n,l,l[3],null);return{c(){t&&t.c()},l(u){t&&t.l(u)},m(u,r){t&&t.m(u,r),e=!0},p(u,r){t&&t.p&&(!e||r&8)&&je(t,n,u,u[3],e?qe(n,u[3],r,null):ze(u[3]),null)},i(u){e||(d(t,u),e=!0)},o(u){D(t,u),e=!1},d(u){t&&t.d(u)}}}function Qn(l){let e,n;const t=[{name:"info"},l[1],{iconNode:l[0]}];let u={$$slots:{default:[Zn]},$$scope:{ctx:l}};for(let r=0;r<t.length;r+=1)u=ie(u,t[r]);return e=new Re({props:u}),{c(){$(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){y(e,r,i),n=!0},p(r,[i]){const a=i&3?He(t,[t[0],i&2&&We(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function xn(l,e,n){let{$$slots:t={},$$scope:u}=e;const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];return l.$$set=i=>{n(1,e=ie(ie({},e),De(i))),"$$scope"in i&&n(3,u=i.$$scope)},e=De(e),[r,e,t,u]}class eu extends G{constructor(e){super(),X(this,e,xn,Qn,R,{})}}const Ei=eu;function tu(l){let e;const n=l[2].default,t=Pe(n,l,l[3],null);return{c(){t&&t.c()},l(u){t&&t.l(u)},m(u,r){t&&t.m(u,r),e=!0},p(u,r){t&&t.p&&(!e||r&8)&&je(t,n,u,u[3],e?qe(n,u[3],r,null):ze(u[3]),null)},i(u){e||(d(t,u),e=!0)},o(u){D(t,u),e=!1},d(u){t&&t.d(u)}}}function nu(l){let e,n;const t=[{name:"more-vertical"},l[1],{iconNode:l[0]}];let u={$$slots:{default:[tu]},$$scope:{ctx:l}};for(let r=0;r<t.length;r+=1)u=ie(u,t[r]);return e=new Re({props:u}),{c(){$(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){y(e,r,i),n=!0},p(r,[i]){const a=i&3?He(t,[t[0],i&2&&We(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function uu(l,e,n){let{$$slots:t={},$$scope:u}=e;const r=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];return l.$$set=i=>{n(1,e=ie(ie({},e),De(i))),"$$scope"in i&&n(3,u=i.$$scope)},e=De(e),[r,e,t,u]}class ru extends G{constructor(e){super(),X(this,e,uu,nu,R,{})}}const lu=ru,bi=/^(npub|nprofile|note|nevent|naddr|nrelay)1[023456789acdefghjklmnpqrstuvwxyz]+/;function Ci(l){const e=ge.decode(l);let n;switch(e.type){case"npub":case"note":return["p",e.data];case"nprofile":return n=["e",e.data.pubkey],e.data.relays&&e.data.relays.length>0&&n.push(e.data.relays[0]),n;case"nevent":return n=["e",e.data.id],e.data.relays&&e.data.relays.length>0&&n.push(e.data.relays[0]),n;case"naddr":return n=["a",`${e.data.kind}:${e.data.pubkey}:${e.data.identifier}`],e.data.relays&&e.data.relays.length>0&&n.push(e.data.relays[0]),n}}function iu(l){if(l[0]!=="a")throw new Error("Not an a tag");const e=l[1].split(":");return ge.naddrEncode({kind:parseInt(e[0]),pubkey:e[1],identifier:e[2]})}function au(l){let e,n,t=l[5]+"",u;return{c(){e=w("div"),n=w("p"),u=H(t),this.h()},l(r){e=B(r,"DIV",{class:!0});var i=V(e);n=B(i,"P",{class:!0});var a=V(n);u=W(a,t),a.forEach(_),i.forEach(_),this.h()},h(){E(n,"class","event-card--error"),E(e,"class","event-card svelte-1l3f4et")},m(r,i){A(r,e,i),b(e,n),b(n,u)},p:N,i:N,o:N,d(r){r&&_(e)}}}function su(l){var f,c;let e,n,t,u,r,i,a,s;return t=new dn({props:{ndk:l[1],user:(f=l[0])==null?void 0:f.author,class:"event-card--avatar",style:"width:40px; height:40px; object-fit:cover; border-radius: 100%; margin-right: 1rem;"}}),r=new Ke({props:{ndk:l[1],user:(c=l[0])==null?void 0:c.author,class:"event-card--name"}}),a=new Nn({props:{ndk:l[1],event:l[0]}}),{c(){e=w("div"),n=w("div"),$(t.$$.fragment),u=T(),$(r.$$.fragment),i=T(),$(a.$$.fragment),this.h()},l(m){e=B(m,"DIV",{class:!0});var v=V(e);n=B(v,"DIV",{class:!0});var o=V(n);I(t.$$.fragment,o),u=U(o),I(r.$$.fragment,o),o.forEach(_),i=U(v),I(a.$$.fragment,v),v.forEach(_),this.h()},h(){E(n,"class","event-card--header svelte-1l3f4et"),E(e,"class","event-card svelte-1l3f4et")},m(m,v){A(m,e,v),b(e,n),y(t,n,null),b(n,u),y(r,n,null),b(e,i),y(a,e,null),s=!0},p(m,v){var F,C;const o={};v&2&&(o.ndk=m[1]),v&1&&(o.user=(F=m[0])==null?void 0:F.author),t.$set(o);const h={};v&2&&(h.ndk=m[1]),v&1&&(h.user=(C=m[0])==null?void 0:C.author),r.$set(h);const g={};v&2&&(g.ndk=m[1]),v&1&&(g.event=m[0]),a.$set(g)},i(m){s||(d(t.$$.fragment,m),d(r.$$.fragment,m),d(a.$$.fragment,m),s=!0)},o(m){D(t.$$.fragment,m),D(r.$$.fragment,m),D(a.$$.fragment,m),s=!1},d(m){m&&_(e),M(t),M(r),M(a)}}}function fu(l){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function ou(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!0,pending:fu,then:su,catch:au,error:5,blocks:[,,,]};return Vn(l[2],t),{c(){e=O(),t.block.c()},l(u){e=O(),t.block.l(u)},m(u,r){A(u,e,r),t.block.m(u,t.anchor=r),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(u,[r]){l=u,Tn(t,l,r)},i(u){n||(d(t.block),n=!0)},o(u){for(let r=0;r<3;r+=1){const i=t.blocks[r];D(i)}n=!1},d(u){u&&_(e),t.block.d(u),t.token=null,t=null}}}function cu(l,e,n){let{ndk:t}=e,{id:u=void 0}=e;const r=void 0;let{event:i=void 0}=e;const a=new Promise(async(s,f)=>{i?s(i):u&&(n(0,i=await t.fetchEvent(u)),i?s(i):f("Event not found"))});return l.$$set=s=>{"ndk"in s&&n(1,t=s.ndk),"id"in s&&n(3,u=s.id),"event"in s&&n(0,i=s.event)},[i,t,a,u,r]}class ct extends G{constructor(e){super(),X(this,e,cu,ou,R,{ndk:1,id:3,relays:4,event:0})}get relays(){return this.$$.ctx[4]}}function me(l){return l!=null&&typeof l=="object"&&l["@@functional/placeholder"]===!0}function de(l){return function e(n){return arguments.length===0||me(n)?e:l.apply(this,arguments)}}function oe(l){return function e(n,t){switch(arguments.length){case 0:return e;case 1:return me(n)?e:de(function(u){return l(n,u)});default:return me(n)&&me(t)?e:me(n)?de(function(u){return l(u,t)}):me(t)?de(function(u){return l(n,u)}):l(n,t)}}}function gn(l,e){switch(l){case 0:return function(){return e.apply(this,arguments)};case 1:return function(n){return e.apply(this,arguments)};case 2:return function(n,t){return e.apply(this,arguments)};case 3:return function(n,t,u){return e.apply(this,arguments)};case 4:return function(n,t,u,r){return e.apply(this,arguments)};case 5:return function(n,t,u,r,i){return e.apply(this,arguments)};case 6:return function(n,t,u,r,i,a){return e.apply(this,arguments)};case 7:return function(n,t,u,r,i,a,s){return e.apply(this,arguments)};case 8:return function(n,t,u,r,i,a,s,f){return e.apply(this,arguments)};case 9:return function(n,t,u,r,i,a,s,f,c){return e.apply(this,arguments)};case 10:return function(n,t,u,r,i,a,s,f,c,m){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Fn(l,e,n){return function(){for(var t=[],u=0,r=l,i=0;i<e.length||u<arguments.length;){var a;i<e.length&&(!me(e[i])||u>=arguments.length)?a=e[i]:(a=arguments[u],u+=1),t[i]=a,me(a)||(r-=1),i+=1}return r<=0?n.apply(this,t):gn(r,Fn(l,t,n))}}var mu=oe(function(e,n){return e===1?de(n):gn(e,Fn(e,[],n))});const du=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Du(l){return l!=null&&typeof l["@@transducer/step"]=="function"}function pn(l,e,n){return function(){if(arguments.length===0)return n();var t=arguments[arguments.length-1];if(!du(t)){for(var u=0;u<l.length;){if(typeof t[l[u]]=="function")return t[l[u]].apply(t,Array.prototype.slice.call(arguments,0,-1));u+=1}if(Du(t)){var r=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return r(t)}}return n.apply(this,arguments)}}const Te={init:function(){return this.xf["@@transducer/init"]()},result:function(l){return this.xf["@@transducer/result"](l)}};function pt(l){for(var e=[],n;!(n=l.next()).done;)e.push(n.value);return e}function kt(l,e,n){for(var t=0,u=n.length;t<u;){if(l(e,n[t]))return!0;t+=1}return!1}function _u(l){var e=String(l).match(/^function (\w*)/);return e==null?"":e[1]}function Ue(l,e){return Object.prototype.hasOwnProperty.call(e,l)}function hu(l,e){return l===e?l!==0||1/l===1/e:l!==l&&e!==e}const ut=typeof Object.is=="function"?Object.is:hu;var Et=Object.prototype.toString,vu=function(){return Et.call(arguments)==="[object Arguments]"?function(e){return Et.call(e)==="[object Arguments]"}:function(e){return Ue("callee",e)}}(),gu=!{toString:null}.propertyIsEnumerable("toString"),bt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ct=function(){return arguments.propertyIsEnumerable("length")}(),Fu=function(e,n){for(var t=0;t<e.length;){if(e[t]===n)return!0;t+=1}return!1},Oe=de(typeof Object.keys=="function"&&!Ct?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,t,u=[],r=Ct&&vu(e);for(n in e)Ue(n,e)&&(!r||n!=="length")&&(u[u.length]=n);if(gu)for(t=bt.length-1;t>=0;)n=bt[t],Ue(n,e)&&!Fu(u,n)&&(u[u.length]=n),t-=1;return u}),At=de(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function wt(l,e,n,t){var u=pt(l),r=pt(e);function i(a,s){return mt(a,s,n.slice(),t.slice())}return!kt(function(a,s){return!kt(i,s,a)},r,u)}function mt(l,e,n,t){if(ut(l,e))return!0;var u=At(l);if(u!==At(e))return!1;if(typeof l["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof l["fantasy-land/equals"]=="function"&&l["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](l);if(typeof l.equals=="function"||typeof e.equals=="function")return typeof l.equals=="function"&&l.equals(e)&&typeof e.equals=="function"&&e.equals(l);switch(u){case"Arguments":case"Array":case"Object":if(typeof l.constructor=="function"&&_u(l.constructor)==="Promise")return l===e;break;case"Boolean":case"Number":case"String":if(!(typeof l==typeof e&&ut(l.valueOf(),e.valueOf())))return!1;break;case"Date":if(!ut(l.valueOf(),e.valueOf()))return!1;break;case"Error":return l.name===e.name&&l.message===e.message;case"RegExp":if(!(l.source===e.source&&l.global===e.global&&l.ignoreCase===e.ignoreCase&&l.multiline===e.multiline&&l.sticky===e.sticky&&l.unicode===e.unicode))return!1;break}for(var r=n.length-1;r>=0;){if(n[r]===l)return t[r]===e;r-=1}switch(u){case"Map":return l.size!==e.size?!1:wt(l.entries(),e.entries(),n.concat([l]),t.concat([e]));case"Set":return l.size!==e.size?!1:wt(l.values(),e.values(),n.concat([l]),t.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=Oe(l);if(i.length!==Oe(e).length)return!1;var a=n.concat([l]),s=t.concat([e]);for(r=i.length-1;r>=0;){var f=i[r];if(!(Ue(f,e)&&mt(e[f],l[f],a,s)))return!1;r-=1}return!0}var pu=oe(function(e,n){return mt(e,n,[],[])});function ku(l,e,n){var t,u;if(typeof l.indexOf=="function")switch(typeof e){case"number":if(e===0){for(t=1/e;n<l.length;){if(u=l[n],u===0&&1/u===t)return n;n+=1}return-1}else if(e!==e){for(;n<l.length;){if(u=l[n],typeof u=="number"&&u!==u)return n;n+=1}return-1}return l.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return l.indexOf(e,n);case"object":if(e===null)return l.indexOf(e,n)}for(;n<l.length;){if(pu(l[n],e))return n;n+=1}return-1}function Bt(l,e){return ku(e,l,0)>=0}function Eu(l,e){for(var n=0,t=e.length,u=Array(t);n<t;)u[n]=l(e[n]),n+=1;return u}function bu(l){return function(){return!l.apply(this,arguments)}}function kn(l,e,n){for(var t=0,u=n.length;t<u;)e=l(e,n[t]),t+=1;return e}function Cu(l,e){for(var n=0,t=e.length,u=[];n<t;)l(e[n])&&(u[u.length]=e[n]),n+=1;return u}function Au(l){return Object.prototype.toString.call(l)==="[object Object]"}var wu=function(){function l(e,n){this.xf=n,this.f=e}return l.prototype["@@transducer/init"]=Te.init,l.prototype["@@transducer/result"]=Te.result,l.prototype["@@transducer/step"]=function(e,n){return this.f(n)?this.xf["@@transducer/step"](e,n):e},l}();function Bu(l){return function(e){return new wu(l,e)}}var $u=oe(pn(["fantasy-land/filter","filter"],Bu,function(l,e){return Au(e)?kn(function(n,t){return l(e[t])&&(n[t]=e[t]),n},{},Oe(e)):Cu(l,e)})),Iu=oe(function(e,n){return $u(bu(e),n)}),yu=function(){function l(e,n){this.xf=n,this.f=e}return l.prototype["@@transducer/init"]=Te.init,l.prototype["@@transducer/result"]=Te.result,l.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},l}(),Mu=function(e){return function(n){return new yu(e,n)}},Nu=oe(pn(["fantasy-land/map","map"],Mu,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return mu(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return kn(function(t,u){return t[u]=e(n[u]),t},{},Oe(n));default:return Eu(e,n)}}));const Su=Number.isInteger||function(e){return e<<0===e};function Vu(l){return Object.prototype.toString.call(l)==="[object String]"}var En=oe(function(e,n){var t=e<0?n.length+e:e;return Vu(n)?n.charAt(t):n[t]}),Tu=oe(function(e,n){if(n!=null)return Su(e)?En(e,n):n[e]}),Uu=oe(function(e,n){return Nu(Tu(e),n)});const Ou=Uu;function Pu(l){return l}var ju=de(Pu);const zu=ju;var qu=function(){function l(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return l.prototype.add=function(e){return!$t(e,!0,this)},l.prototype.has=function(e){return $t(e,!1,this)},l}();function $t(l,e,n){var t=typeof l,u,r;switch(t){case"string":case"number":return l===0&&1/l===-1/0?n._items["-0"]?!0:(e&&(n._items["-0"]=!0),!1):n._nativeSet!==null?e?(u=n._nativeSet.size,n._nativeSet.add(l),r=n._nativeSet.size,r===u):n._nativeSet.has(l):t in n._items?l in n._items[t]?!0:(e&&(n._items[t][l]=!0),!1):(e&&(n._items[t]={},n._items[t][l]=!0),!1);case"boolean":if(t in n._items){var i=l?1:0;return n._items[t][i]?!0:(e&&(n._items[t][i]=!0),!1)}else return e&&(n._items[t]=l?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?e?(u=n._nativeSet.size,n._nativeSet.add(l),r=n._nativeSet.size,r===u):n._nativeSet.has(l):t in n._items?Bt(l,n._items[t])?!0:(e&&n._items[t].push(l),!1):(e&&(n._items[t]=[l]),!1);case"undefined":return n._items[t]?!0:(e&&(n._items[t]=!0),!1);case"object":if(l===null)return n._items.null?!0:(e&&(n._items.null=!0),!1);default:return t=Object.prototype.toString.call(l),t in n._items?Bt(l,n._items[t])?!0:(e&&n._items[t].push(l),!1):(e&&(n._items[t]=[l]),!1)}}var Lu=En(-1);const bn=Lu;var Ru=oe(function(e,n){for(var t=new qu,u=0;u<e.length;u+=1)t.add(e[u]);return Iu(t.has.bind(t),n)});const Hu=Ru,Je="newline",lt="text",Ye="topic",ke="link",Cn="html",An="invoice",ve=l=>l?l[0]:void 0,Wu=l=>l.replace(/^[\w+]+:\/?\/?/,""),wn=l=>!l.match(/\.(apk|docx|xlsx|csv|dmg)/)&&bn(l.split("://")).includes("/"),Bn=({content:l,tags:e=[],html:n=!1})=>{const t=[];let u=l.trim(),r="";const i=()=>{if(n)return;const o=ve(u.match(/^\n+/));if(o)return[Je,o,o]},a=()=>{const o=u.match(/^#\[(\d+)\]/i);if(o){const h=parseInt(o[1]);if(e[h]){const[g,F,C]=e[h],j=[C].filter(zu);let S,p,k;return g==="p"?(S="nprofile",p={pubkey:F,relays:j},k=ge.nprofileEncode(p)):(S="nevent",p={id:F,relays:j,pubkey:null},k=ge.neventEncode(p)),[`nostr:${S}`,o[0],{...p,entity:k}]}}},s=()=>{const o=ve(u.match(/^#\w+/i));if(o&&!o.match(/^#\d+$/))return[Ye,o,o.slice(1)]},f=()=>{const o=ve(u.match(/^(web\+)?(nostr:)?\/?\/?n(event|ote|profile|pub|addr)1[\d\w]+/i));if(o)try{const h=Wu(o),{type:g,data:F}=ge.decode(h);let C=F;return g==="note"?C={id:F}:g==="npub"&&(C={pubkey:F}),[`nostr:${g}`,o,{...C,entity:h}]}catch(h){console.log(h)}},c=()=>{const o=ve(u.match(/^ln(bc|url)[\d\w]{50,1000}/i));if(o)return[An,o,o]},m=()=>{if(n)return;const o=ve(u.match(/^([a-z\+:]{2,30}:\/\/)?[^\s]+\.[a-z]{2,6}[^\s]*[^\.!?,:\s]/gi));if(o){const h=bn(t);if((h==null?void 0:h.type)==="text"&&h.value.endsWith("/"))return;let g=o;return g.match(/\.\./)?void 0:(g.match("://")||(g="https://"+g),[ke,o,{url:g,isMedia:wn(g)}])}},v=()=>{const o=ve(u.match(/^<(pre|code)>.*?<\/\1>/gis));if(o)return[Cn,o,o]};for(;u;){const o=v()||i()||a()||s()||f()||m()||c();if(o){r&&(t.push({type:"text",value:r}),r="");const[h,g,F]=o;t.push({type:h,value:F}),u=u.slice(g.length)}else{const h=ve(u.match(/^[\w\d]+ ?/i))||u[0];r+=h,u=u.slice(h.length)}}return r&&t.push({type:lt,value:r}),t},Ku=(l,{showEntire:e,maxLength:n,showMedia:t=!1})=>{if(e)return l;let u=0;const r=[],i=n*.6;return l.every((a,s)=>{const f=[Ye,lt].includes(a.type)||a.type===ke&&!a.value.isMedia,c=a.type===An||a.type.startsWith("nostr:")||a.value.isMedia;return f&&(u+=a.value.length),c&&(u+=t?n/3:a.value.length),r.push(a),u>i&&s<l.length-1?((f||c&&!t)&&r.push({type:lt,value:"..."}),!1):!0}),r},It=l=>Ou("value",l.filter(e=>e.type===ke&&e.isMedia));function yt(l,e,n){const t=l.slice();return t[1]=e[n],t}function Mt(l){let e;return{c(){e=w("br")},l(n){e=B(n,"BR",{})},m(n,t){A(n,e,t)},p:N,d(n){n&&_(e)}}}function Gu(l){let e,n=fe(l[0]),t=[];for(let u=0;u<n.length;u+=1)t[u]=Mt(yt(l,n,u));return{c(){for(let u=0;u<t.length;u+=1)t[u].c();e=O()},l(u){for(let r=0;r<t.length;r+=1)t[r].l(u);e=O()},m(u,r){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(u,r);A(u,e,r)},p(u,[r]){if(r&1){n=fe(u[0]);let i;for(i=0;i<n.length;i+=1){const a=yt(u,n,i);t[i]?t[i].p(a,r):(t[i]=Mt(),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},i:N,o:N,d(u){u&&_(e),it(t,u)}}}function Xu(l,e,n){let{value:t=[]}=e;return l.$$set=u=>{"value"in u&&n(0,t=u.value)},[t]}class $n extends G{constructor(e){super(),X(this,e,Xu,Gu,R,{value:0})}}function Ju(l){let e,n;return{c(){e=H("#"),n=H(l[0])},l(t){e=W(t,"#"),n=W(t,l[0])},m(t,u){A(t,e,u),A(t,n,u)},p(t,[u]){u&1&&ne(n,t[0])},i:N,o:N,d(t){t&&(_(e),_(n))}}}function Yu(l,e,n){let{value:t=""}=e;return l.$$set=u=>{"value"in u&&n(0,t=u.value)},[t]}class In extends G{constructor(e){super(),X(this,e,Yu,Ju,R,{value:0})}}function Zu(l){let e,n=l[0].url.replace(/https?:\/\/(www\.)?/,"")+"",t,u;return{c(){e=w("a"),t=H(n),this.h()},l(r){e=B(r,"A",{href:!0});var i=V(e);t=W(i,n),i.forEach(_),this.h()},h(){E(e,"href",u=l[0].url)},m(r,i){A(r,e,i),b(e,t)},p(r,i){i&1&&n!==(n=r[0].url.replace(/https?:\/\/(www\.)?/,"")+"")&&ne(t,n),i&1&&u!==(u=r[0].url)&&E(e,"href",u)},d(r){r&&_(e)}}}function Qu(l){let e;function n(r,i){return r[2]?nr:r[3]?tr:r[4]?er:xu}let u=n(l)(l);return{c(){u.c(),e=O()},l(r){u.l(r),e=O()},m(r,i){u.m(r,i),A(r,e,i)},p(r,i){u.p(r,i)},d(r){r&&_(e),u.d(r)}}}function xu(l){let e,n=l[0].url.replace(/https?:\/\/(www\.)?/,"")+"",t,u;return{c(){e=w("a"),t=H(n),this.h()},l(r){e=B(r,"A",{href:!0});var i=V(e);t=W(i,n),i.forEach(_),this.h()},h(){E(e,"href",u=l[0].url)},m(r,i){A(r,e,i),b(e,t)},p(r,i){i&1&&n!==(n=r[0].url.replace(/https?:\/\/(www\.)?/,"")+"")&&ne(t,n),i&1&&u!==(u=r[0].url)&&E(e,"href",u)},d(r){r&&_(e)}}}function er(l){let e,n,t=l[0].url.replace(/https?:\/\/(www\.)?/,"")+"",u,r,i;return{c(){e=w("audio"),n=w("a"),u=H(t),this.h()},l(a){e=B(a,"AUDIO",{src:!0});var s=V(e);n=B(s,"A",{href:!0});var f=V(n);u=W(f,t),f.forEach(_),s.forEach(_),this.h()},h(){E(n,"href",r=l[0].url),se(e.src,i=l[0].url)||E(e,"src",i),e.controls=!0},m(a,s){A(a,e,s),b(e,n),b(n,u)},p(a,s){s&1&&t!==(t=a[0].url.replace(/https?:\/\/(www\.)?/,"")+"")&&ne(u,t),s&1&&r!==(r=a[0].url)&&E(n,"href",r),s&1&&!se(e.src,i=a[0].url)&&E(e,"src",i)},d(a){a&&_(e)}}}function tr(l){let e,n;return{c(){e=w("video"),this.h()},l(t){e=B(t,"VIDEO",{src:!0}),V(e).forEach(_),this.h()},h(){se(e.src,n=l[0].url)||E(e,"src",n),e.controls=!0},m(t,u){A(t,e,u)},p(t,u){u&1&&!se(e.src,n=t[0].url)&&E(e,"src",n)},d(t){t&&_(e)}}}function nr(l){let e,n,t;return{c(){e=w("img"),this.h()},l(u){e=B(u,"IMG",{src:!0,alt:!0}),this.h()},h(){se(e.src,n=l[0].url)||E(e,"src",n),E(e,"alt",t=l[0].url)},m(u,r){A(u,e,r)},p(u,r){r&1&&!se(e.src,n=u[0].url)&&E(e,"src",n),r&1&&t!==(t=u[0].url)&&E(e,"alt",t)},d(u){u&&_(e)}}}function ur(l){let e;function n(r,i){return r[1]&&r[0].isMedia?Qu:Zu}let t=n(l),u=t(l);return{c(){u.c(),e=O()},l(r){u.l(r),e=O()},m(r,i){u.m(r,i),A(r,e,i)},p(r,[i]){t===(t=n(r))&&u?u.p(r,i):(u.d(1),u=t(r),u&&(u.c(),u.m(e.parentNode,e)))},i:N,o:N,d(r){r&&_(e),u.d(r)}}}function rr(l,e,n){let{value:t}=e,{showMedia:u=!1}=e;const r=t.url.match(/^.*\.(jpg|jpeg|png|webp|gif|avif|svg)/gi),i=t.url.match(/^.*\.(mov|mkv|avi|m4v|webm)/gi),a=t.url.match(/^.*\.(ogg|mp3|wav)/gi);return l.$$set=s=>{"value"in s&&n(0,t=s.value),"showMedia"in s&&n(1,u=s.showMedia)},[t,u,r,i,a]}class dt extends G{constructor(e){super(),X(this,e,rr,ur,R,{value:0,showMedia:1})}}function lr(l){let e,n,t;return n=new Ke({props:{ndk:l[0],pubkey:l[1].pubkey}}),n.$on("click",l[2]),{c(){e=w("span"),$(n.$$.fragment)},l(u){e=B(u,"SPAN",{});var r=V(e);I(n.$$.fragment,r),r.forEach(_)},m(u,r){A(u,e,r),y(n,e,null),t=!0},p(u,[r]){const i={};r&1&&(i.ndk=u[0]),r&2&&(i.pubkey=u[1].pubkey),n.$set(i)},i(u){t||(d(n.$$.fragment,u),t=!0)},o(u){D(n.$$.fragment,u),t=!1},d(u){u&&_(e),M(n)}}}function ir(l,e,n){let{ndk:t}=e,{value:u}=e;function r(i){K.call(this,l,i)}return l.$$set=i=>{"ndk"in i&&n(0,t=i.ndk),"value"in i&&n(1,u=i.value)},[t,u,r]}class yn extends G{constructor(e){super(),X(this,e,ir,lr,R,{ndk:0,value:1})}}function Nt(l,e,n){const t=l.slice();return t[14]=e[n].type,t[15]=e[n].value,t[17]=n,t}function ar(l){let e=l[15]+"",n;return{c(){n=H(e)},l(t){n=W(t,e)},m(t,u){A(t,n,u)},p:N,i:N,o:N,d(t){t&&_(n)}}}function sr(l){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function fr(l){let e,n;return e=new ct({props:{ndk:l[0],id:l[15].id,relays:l[15].relays}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function or(l){let e,n;return e=new yn({props:{ndk:l[0],value:l[15]}}),e.$on("click",l[10]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function cr(l){let e,n;return e=new dt({props:{value:l[15],showMedia:l[2]&&l[3](l[17])}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&4&&(r.showMedia=t[2]&&t[3](t[17])),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function mr(l){let e,n;return e=new In({props:{value:l[15]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p:N,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function dr(l){let e,n;return e=new $n({props:{value:l[15]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p:N,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function St(l){let e,n,t,u,r,i,a=" ",s,f;const c=[dr,mr,cr,or,fr,sr,ar],m=[];function v(o,h){return h&6&&(n=null),o[14]===Je?0:o[14]===Ye?1:o[14]===ke?2:(e==null&&(e=!!o[14].match(/^nostr:np(rofile|ub)$/)),e?3:(n==null&&(n=!!(o[14].startsWith("nostr:")&&o[2]&&o[3](o[17])&&o[15].id!==o[1])),n?4:(t==null&&(t=!!o[14].startsWith("nostr:")),t?5:6)))}return u=v(l,-1),r=m[u]=c[u](l),{c(){r.c(),i=T(),s=H(a)},l(o){r.l(o),i=U(o),s=W(o,a)},m(o,h){m[u].m(o,h),A(o,i,h),A(o,s,h),f=!0},p(o,h){let g=u;u=v(o,h),u===g?m[u].p(o,h):(q(),D(m[g],1,1,()=>{m[g]=null}),L(),r=m[u],r?r.p(o,h):(r=m[u]=c[u](o),r.c()),d(r,1),r.m(i.parentNode,i))},i(o){f||(d(r),f=!0)},o(o){D(r),f=!1},d(o){o&&(_(i),_(s)),m[u].d(o)}}}function Dr(l){let e,n,t,u=fe(l[4]),r=[];for(let a=0;a<u.length;a+=1)r[a]=St(Nt(l,u,a));const i=a=>D(r[a],1,1,()=>{r[a]=null});return{c(){e=w("div"),n=w("p");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=B(a,"DIV",{class:!0});var s=V(e);n=B(s,"P",{});var f=V(n);for(let c=0;c<r.length;c+=1)r[c].l(f);f.forEach(_),s.forEach(_),this.h()},h(){E(e,"class","flex flex-col gap-2 overflow-hidden text-ellipsis")},m(a,s){A(a,e,s),b(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(n,null);t=!0},p(a,[s]){if(s&31){u=fe(a[4]);let f;for(f=0;f<u.length;f+=1){const c=Nt(a,u,f);r[f]?(r[f].p(c,s),d(r[f],1)):(r[f]=St(c),r[f].c(),d(r[f],1),r[f].m(n,null))}for(q(),f=u.length;f<r.length;f+=1)i(f);L()}},i(a){if(!t){for(let s=0;s<u.length;s+=1)d(r[s]);t=!0}},o(a){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)D(r[s]);t=!1},d(a){a&&_(e),it(r,a)}}}function _r(l,e,n){let{event:t,maxLength:u}=e,{ndk:r}=e,{anchorId:i=null}=e,{showEntire:a=!1}=e,{showMedia:s=!0}=e,{content:f=t.content}=e;const c=Bn({...t,content:f}),m=Ku(c,{maxLength:u,showEntire:a,showMedia:s}),v=It(m);Hu(v,It(c));const o=F=>!m[F]||m[F].type===Je,h=F=>o(F-1)||o(F+1);function g(F){K.call(this,l,F)}return l.$$set=F=>{"event"in F&&n(5,t=F.event),"maxLength"in F&&n(6,u=F.maxLength),"ndk"in F&&n(0,r=F.ndk),"anchorId"in F&&n(1,i=F.anchorId),"showEntire"in F&&n(7,a=F.showEntire),"showMedia"in F&&n(2,s=F.showMedia),"content"in F&&n(8,f=F.content)},[r,i,s,h,m,t,u,a,f,o,g]}class hr extends G{constructor(e){super(),X(this,e,_r,Dr,R,{event:5,maxLength:6,ndk:0,anchorId:1,showEntire:7,showMedia:2,content:8,isNewline:9,isStartOrEnd:3})}get isNewline(){return this.$$.ctx[9]}get isStartOrEnd(){return this.$$.ctx[3]}}function vr(l,e=!1,n=1){const t=e?1e3:1024;if(Math.abs(l)<t)return l+" B";const u=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let r=-1;const i=10**n;do l/=t,++r;while(Math.round(Math.abs(l)*i)/i>=t&&r<u.length-1);return l.toFixed(n)+" "+u[r]}function Vt(l){let e,n='<span class="kind1063-label">File preview:</span>',t,u,r,i,a;return{c(){e=w("div"),e.innerHTML=n,t=T(),u=w("div"),r=w("img"),this.h()},l(s){e=B(s,"DIV",{"data-svelte-h":!0}),le(e)!=="svelte-bng9nn"&&(e.innerHTML=n),t=U(s),u=B(s,"DIV",{class:!0});var f=V(u);r=B(f,"IMG",{src:!0,alt:!0,class:!0}),f.forEach(_),this.h()},h(){se(r.src,i=l[4])||E(r,"src",i),E(r,"alt",a=l[0].content),E(r,"class","svelte-139jwol"),E(u,"class","kind1063--filePreview svelte-139jwol")},m(s,f){A(s,e,f),A(s,t,f),A(s,u,f),b(u,r)},p(s,f){f&1&&a!==(a=s[0].content)&&E(r,"alt",a)},d(s){s&&(_(e),_(t),_(u))}}}function Tt(l){let e,n='<span class="kind1063-label">File preview:</span>',t,u,r,i,a,s,f;return{c(){e=w("div"),e.innerHTML=n,t=T(),u=w("div"),r=w("video"),i=w("source"),s=w("a"),f=H("Download the video"),this.h()},l(c){e=B(c,"DIV",{"data-svelte-h":!0}),le(e)!=="svelte-bng9nn"&&(e.innerHTML=n),t=U(c),u=B(c,"DIV",{class:!0});var m=V(u);r=B(m,"VIDEO",{class:!0});var v=V(r);i=B(v,"SOURCE",{src:!0,type:!0}),s=B(v,"A",{href:!0});var o=V(s);f=W(o,"Download the video"),o.forEach(_),v.forEach(_),m.forEach(_),this.h()},h(){se(i.src,a=l[4])||E(i,"src",a),E(i,"type",l[6]),E(s,"href",l[4]),r.controls=!0,E(r,"class","svelte-139jwol"),E(u,"class","kind1063--filePreview svelte-139jwol")},m(c,m){A(c,e,m),A(c,t,m),A(c,u,m),b(u,r),b(r,i),b(r,s),b(s,f)},p:N,d(c){c&&(_(e),_(t),_(u))}}}function gr(l){let e,n,t="File metadata",u,r,i,a="Description:",s,f=l[0].content+"",c,m,v,o,h="File URL:",g,F,C,j,S,p,k="MIME type:",z,Z,ue,P,J,ae="File size:",re,ce,Fe,_e,he,Dt="Dimensions:",Ze,Qe,xe,et=l[1]&&l[2].includes(l[6]),we,tt=l[1]&&l[3].includes(l[6]),ee=et&&Vt(l),te=tt&&Tt(l);return{c(){e=w("div"),n=w("h3"),n.textContent=t,u=T(),r=w("div"),i=w("span"),i.textContent=a,s=T(),c=H(f),m=T(),v=w("div"),o=w("span"),o.textContent=h,g=T(),F=w("a"),C=H(l[5]),j=T(),S=w("div"),p=w("span"),p.textContent=k,z=T(),Z=H(l[6]),ue=T(),P=w("div"),J=w("span"),J.textContent=ae,re=T(),ce=H(l[7]),Fe=T(),_e=w("div"),he=w("span"),he.textContent=Dt,Ze=T(),Qe=H(l[8]),xe=T(),ee&&ee.c(),we=T(),te&&te.c(),this.h()},l(Q){e=B(Q,"DIV",{class:!0});var Y=V(e);n=B(Y,"H3",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-1lwoxzf"&&(n.textContent=t),u=U(Y),r=B(Y,"DIV",{});var Be=V(r);i=B(Be,"SPAN",{class:!0,"data-svelte-h":!0}),le(i)!=="svelte-14zzrlk"&&(i.textContent=a),s=U(Be),c=W(Be,f),Be.forEach(_),m=U(Y),v=B(Y,"DIV",{});var $e=V(v);o=B($e,"SPAN",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-lesb9z"&&(o.textContent=h),g=U($e),F=B($e,"A",{href:!0,target:!0});var _t=V(F);C=W(_t,l[5]),_t.forEach(_),$e.forEach(_),j=U(Y),S=B(Y,"DIV",{});var Ie=V(S);p=B(Ie,"SPAN",{class:!0,"data-svelte-h":!0}),le(p)!=="svelte-qmfnom"&&(p.textContent=k),z=U(Ie),Z=W(Ie,l[6]),Ie.forEach(_),ue=U(Y),P=B(Y,"DIV",{});var ye=V(P);J=B(ye,"SPAN",{class:!0,"data-svelte-h":!0}),le(J)!=="svelte-1vhg65t"&&(J.textContent=ae),re=U(ye),ce=W(ye,l[7]),ye.forEach(_),Fe=U(Y),_e=B(Y,"DIV",{});var Me=V(_e);he=B(Me,"SPAN",{class:!0,"data-svelte-h":!0}),le(he)!=="svelte-135thp"&&(he.textContent=Dt),Ze=U(Me),Qe=W(Me,l[8]),Me.forEach(_),xe=U(Y),ee&&ee.l(Y),we=U(Y),te&&te.l(Y),Y.forEach(_),this.h()},h(){E(n,"class","svelte-139jwol"),E(i,"class","kind1063-label"),E(o,"class","kind1063-label"),E(F,"href",l[4]),E(F,"target","_blank"),E(p,"class","kind1063-label"),E(J,"class","kind1063-label"),E(he,"class","kind1063-label"),E(e,"class","kind1063--content svelte-139jwol")},m(Q,Y){A(Q,e,Y),b(e,n),b(e,u),b(e,r),b(r,i),b(r,s),b(r,c),b(e,m),b(e,v),b(v,o),b(v,g),b(v,F),b(F,C),b(e,j),b(e,S),b(S,p),b(S,z),b(S,Z),b(e,ue),b(e,P),b(P,J),b(P,re),b(P,ce),b(e,Fe),b(e,_e),b(_e,he),b(_e,Ze),b(_e,Qe),b(e,xe),ee&&ee.m(e,null),b(e,we),te&&te.m(e,null)},p(Q,[Y]){Y&1&&f!==(f=Q[0].content+"")&&ne(c,f),Y&2&&(et=Q[1]&&Q[2].includes(Q[6])),et?ee?ee.p(Q,Y):(ee=Vt(Q),ee.c(),ee.m(e,we)):ee&&(ee.d(1),ee=null),Y&2&&(tt=Q[1]&&Q[3].includes(Q[6])),tt?te?te.p(Q,Y):(te=Tt(Q),te.c(),te.m(e,null)):te&&(te.d(1),te=null)},i:N,o:N,d(Q){Q&&_(e),ee&&ee.d(),te&&te.d()}}}function Fr(l,e,n){let{event:t}=e,{showMedia:u=!0}=e;const r=["image/png","image/jpg","image/jpeg","image/webp","image/gif"],i=["video/mp4","video/ogg","video/quicktime","video/avi","video/mpeg"],a=t.getMatchingTags("url")[0][1],s=a.substring(0,32).concat("..."),f=t.getMatchingTags("m")[0][1],c=t.getMatchingTags("size"),m=c?vr(parseInt(c[0][1])):"",v=t.getMatchingTags("dim"),o=v.length>0?v[0][1]:"";return l.$$set=h=>{"event"in h&&n(0,t=h.event),"showMedia"in h&&n(1,u=h.showMedia)},[t,u,r,i,a,s,f,m,o]}class pr extends G{constructor(e){super(),X(this,e,Fr,gr,R,{event:0,showMedia:1})}}function kr(l){let e,n,t;return n=new dt({props:{showMedia:!1,value:{url:l[1],isMedia:wn(l[1])}}}),{c(){e=w("div"),$(n.$$.fragment),this.h()},l(u){e=B(u,"DIV",{class:!0});var r=V(e);I(n.$$.fragment,r),r.forEach(_),this.h()},h(){E(e,"class","highlight--reference")},m(u,r){A(u,e,r),y(n,e,null),t=!0},p:N,i(u){t||(d(n.$$.fragment,u),t=!0)},o(u){D(n.$$.fragment,u),t=!1},d(u){u&&_(e),M(n)}}}function Er(l){let e,n,t,u=rt.sanitize(l[0]||"")+"",r,i,a,s=l[1]&&kr(l);return{c(){e=w("div"),n=w("blockquote"),t=new at(!1),r=T(),s&&s.c(),i=O(),this.h()},l(f){e=B(f,"DIV",{});var c=V(e);n=B(c,"BLOCKQUOTE",{class:!0});var m=V(n);t=st(m,!1),m.forEach(_),c.forEach(_),r=U(f),s&&s.l(f),i=O(),this.h()},h(){t.a=null,E(n,"class","highlight--blockquote")},m(f,c){A(f,e,c),b(e,n),t.m(u,n),A(f,r,c),s&&s.m(f,c),A(f,i,c),a=!0},p(f,[c]){(!a||c&1)&&u!==(u=rt.sanitize(f[0]||"")+"")&&t.p(u),f[1]&&s.p(f,c)},i(f){a||(d(s),a=!0)},o(f){D(s),a=!1},d(f){f&&(_(e),_(r),_(i)),s&&s.d(f)}}}function br(l,e,n){let{event:t}=e;const u=t==null?void 0:t.tagValue("r");let r=t==null?void 0:t.tagValue("context");return r=r==null?void 0:r.replace(t==null?void 0:t.content,`<mark>${t==null?void 0:t.content}</mark>`),l.$$set=i=>{"event"in i&&n(2,t=i.event)},[r,u,t]}class Cr extends G{constructor(e){super(),X(this,e,br,Er,R,{event:2})}}function Ut(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ot(l,e){let n,t,u,r,i,a;return t=new dn({props:{ndk:e[0],pubkey:e[2][1],class:"list-item--avatar"}}),r=new Ke({props:{ndk:e[0],pubkey:e[2][1],class:"list-item--name"}}),{key:l,first:null,c(){n=w("div"),$(t.$$.fragment),u=T(),$(r.$$.fragment),i=T(),this.h()},l(s){n=B(s,"DIV",{class:!0});var f=V(n);I(t.$$.fragment,f),u=U(f),I(r.$$.fragment,f),i=U(f),f.forEach(_),this.h()},h(){E(n,"class","list-item svelte-orxwd5"),this.first=n},m(s,f){A(s,n,f),y(t,n,null),b(n,u),y(r,n,null),b(n,i),a=!0},p(s,f){e=s;const c={};f&1&&(c.ndk=e[0]),f&2&&(c.pubkey=e[2][1]),t.$set(c);const m={};f&1&&(m.ndk=e[0]),f&2&&(m.pubkey=e[2][1]),r.$set(m)},i(s){a||(d(t.$$.fragment,s),d(r.$$.fragment,s),a=!0)},o(s){D(t.$$.fragment,s),D(r.$$.fragment,s),a=!1},d(s){s&&_(n),M(t),M(r)}}}function Ar(l){let e=[],n=new Map,t,u,r=fe(l[1].items);const i=a=>a[2][1];for(let a=0;a<r.length;a+=1){let s=Ut(l,r,a),f=i(s);n.set(f,e[a]=Ot(f,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=O()},l(a){for(let s=0;s<e.length;s+=1)e[s].l(a);t=O()},m(a,s){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,s);A(a,t,s),u=!0},p(a,[s]){s&3&&(r=fe(a[1].items),q(),e=Dn(e,s,i,1,a,r,n,t.parentNode,_n,Ot,t,Ut),L())},i(a){if(!u){for(let s=0;s<r.length;s+=1)d(e[s]);u=!0}},o(a){for(let s=0;s<e.length;s+=1)D(e[s]);u=!1},d(a){a&&_(t);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function wr(l,e,n){let{ndk:t}=e,{list:u}=e;return l.$$set=r=>{"ndk"in r&&n(0,t=r.ndk),"list"in r&&n(1,u=r.list)},[t,u]}class Br extends G{constructor(e){super(),X(this,e,wr,Ar,R,{ndk:0,list:1})}}function Pt(l,e,n){const t=l.slice();return t[2]=e[n],t}function jt(l,e){let n,t,u,r;return t=new ct({props:{ndk:e[0],id:e[2][1]}}),{key:l,first:null,c(){n=w("div"),$(t.$$.fragment),u=T(),this.h()},l(i){n=B(i,"DIV",{class:!0});var a=V(n);I(t.$$.fragment,a),u=U(a),a.forEach(_),this.h()},h(){E(n,"class","list-item svelte-orxwd5"),this.first=n},m(i,a){A(i,n,a),y(t,n,null),b(n,u),r=!0},p(i,a){e=i;const s={};a&1&&(s.ndk=e[0]),a&2&&(s.id=e[2][1]),t.$set(s)},i(i){r||(d(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&_(n),M(t)}}}function $r(l){let e=[],n=new Map,t,u,r=fe(l[1].items);const i=a=>a[2][1];for(let a=0;a<r.length;a+=1){let s=Pt(l,r,a),f=i(s);n.set(f,e[a]=jt(f,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=O()},l(a){for(let s=0;s<e.length;s+=1)e[s].l(a);t=O()},m(a,s){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,s);A(a,t,s),u=!0},p(a,[s]){s&3&&(r=fe(a[1].items),q(),e=Dn(e,s,i,1,a,r,n,t.parentNode,_n,jt,t,Pt),L())},i(a){if(!u){for(let s=0;s<r.length;s+=1)d(e[s]);u=!0}},o(a){for(let s=0;s<e.length;s+=1)D(e[s]);u=!1},d(a){a&&_(t);for(let s=0;s<e.length;s+=1)e[s].d(a)}}}function Ir(l,e,n){let{ndk:t}=e,{list:u}=e;return l.$$set=r=>{"ndk"in r&&n(0,t=r.ndk),"list"in r&&n(1,u=r.list)},[t,u]}class yr extends G{constructor(e){super(),X(this,e,Ir,$r,R,{ndk:0,list:1})}}const Mr=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,Nr=Object.hasOwnProperty;class Sr{constructor(){this.occurrences,this.reset()}slug(e,n){const t=this;let u=Vr(e,n===!0);const r=u;for(;Nr.call(t.occurrences,u);)t.occurrences[r]++,u=r+"-"+t.occurrences[r];return t.occurrences[u]=0,u}reset(){this.occurrences=Object.create(null)}}function Vr(l,e){return typeof l!="string"?"":(e||(l=l.toLowerCase()),l.replace(Mr,"").replace(/ /g,"-"))}let zt;function Tr({prefix:l=""}={}){return{headerIds:!1,hooks:{preprocess(e){return zt=new Sr,e}},renderer:{heading(e,n,t){return t=t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,""),`<h${n} id="${l}${zt.slug(t)}">${e}</h${n}>
`}}}}function Ur(){return{mangle:!1,walkTokens(l){if(l.type!=="link"||!l.href.startsWith("mailto:"))return;const e=l.href.substring(7),n=Or(e);l.href=`mailto:${n}`,!(l.tokens.length!==1||l.tokens[0].type!=="text"||l.tokens[0].text!==e)&&(l.text=n,l.tokens[0].text=n)}}}function Or(l){let e="",n,t;const u=l.length;for(n=0;n<u;n++)t=l.charCodeAt(n),Math.random()>.5&&(t="x"+t.toString(16)),e+="&#"+t+";";return e}const Pr=l=>(nt.use(Ur()),nt.use(Tr()),rt.sanitize(nt.parse(l.replace(/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]/,""))));function qt(l,e,n){const t=l.slice();return t[7]=e[n].type,t[8]=e[n].value,t[10]=n,t}function jr(l){let e,n=l[8]+"",t;return{c(){e=new at(!1),t=O(),this.h()},l(u){e=st(u,!1),t=O(),this.h()},h(){e.a=t},m(u,r){e.m(n,u,r),A(u,t,r)},p:N,i:N,o:N,d(u){u&&(_(t),e.d())}}}function zr(l){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function qr(l){let e,n;return e=new ct({props:{ndk:l[0],id:l[8].id,relays:l[8].relays}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Lr(l){let e,n;return e=new yn({props:{ndk:l[0],value:l[8]}}),e.$on("click",l[5]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Rr(l){let e,n;return e=new dt({props:{value:l[8],showMedia:l[1]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.showMedia=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Hr(l){let e,n;return e=new In({props:{value:l[8]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p:N,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Wr(l){let e,n=l[8]+"",t;return{c(){e=new at(!1),t=O(),this.h()},l(u){e=st(u,!1),t=O(),this.h()},h(){e.a=t},m(u,r){e.m(n,u,r),A(u,t,r)},p:N,i:N,o:N,d(u){u&&(_(t),e.d())}}}function Kr(l){let e,n;return e=new $n({props:{value:l[8]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p:N,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Lt(l){let e,n,t,u,r,i,a;const s=[Kr,Wr,Hr,Rr,Lr,qr,zr,jr],f=[];function c(m,v){return v&6&&(n=null),m[7]===Je?0:m[7]===Cn?1:m[7]===Ye?2:m[7]===ke?3:(e==null&&(e=!!m[7].match(/^nostr:np(rofile|ub)$/)),e?4:(n==null&&(n=!!(m[7].startsWith("nostr:")&&m[1]&&m[8].id!==m[2])),n?5:(t==null&&(t=!!m[7].startsWith("nostr:")),t?6:7)))}return u=c(l,-1),r=f[u]=s[u](l),{c(){r.c(),i=O()},l(m){r.l(m),i=O()},m(m,v){f[u].m(m,v),A(m,i,v),a=!0},p(m,v){let o=u;u=c(m,v),u===o?f[u].p(m,v):(q(),D(f[o],1,1,()=>{f[o]=null}),L(),r=f[u],r?r.p(m,v):(r=f[u]=s[u](m),r.c()),d(r,1),r.m(i.parentNode,i))},i(m){a||(d(r),a=!0)},o(m){D(r),a=!1},d(m){m&&_(i),f[u].d(m)}}}function Gr(l){let e,n,t=fe(l[3]),u=[];for(let i=0;i<t.length;i+=1)u[i]=Lt(qt(l,t,i));const r=i=>D(u[i],1,1,()=>{u[i]=null});return{c(){e=w("div");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=B(i,"DIV",{class:!0});var a=V(e);for(let s=0;s<u.length;s+=1)u[s].l(a);a.forEach(_),this.h()},h(){E(e,"class","article svelte-1r87z25")},m(i,a){A(i,e,a);for(let s=0;s<u.length;s+=1)u[s]&&u[s].m(e,null);n=!0},p(i,[a]){if(a&15){t=fe(i[3]);let s;for(s=0;s<t.length;s+=1){const f=qt(i,t,s);u[s]?(u[s].p(f,a),d(u[s],1)):(u[s]=Lt(f),u[s].c(),d(u[s],1),u[s].m(e,null))}for(q(),s=t.length;s<u.length;s+=1)r(s);L()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)d(u[a]);n=!0}},o(i){u=u.filter(Boolean);for(let a=0;a<u.length;a+=1)D(u[a]);n=!1},d(i){i&&_(e),it(u,i)}}}function Xr(l,e,n){let{ndk:t}=e,{article:u}=e,{showMedia:r=!0}=e,{anchorId:i=null}=e;const a=Pr(u.content),s=Bn({content:a,tags:u.tags,html:!0});function f(c){K.call(this,l,c)}return l.$$set=c=>{"ndk"in c&&n(0,t=c.ndk),"article"in c&&n(4,u=c.article),"showMedia"in c&&n(1,r=c.showMedia),"anchorId"in c&&n(2,i=c.anchorId)},[t,r,i,s,u,f]}class Mn extends G{constructor(e){super(),X(this,e,Xr,Gr,R,{ndk:0,article:4,showMedia:1,anchorId:2})}}function Jr(l){let e,n;return e=new Mn({props:{ndk:l[0],article:Se.from(l[1]),anchorId:l[2],showMedia:l[5]}}),e.$on("click",l[9]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),u&2&&(r.article=Se.from(t[1])),u&4&&(r.anchorId=t[2]),u&32&&(r.showMedia=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Yr(l){let e,n;return e=new Mn({props:{ndk:l[0],article:Se.from(l[1]),showMedia:l[5]}}),e.$on("click",l[8]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),u&2&&(r.article=Se.from(t[1])),u&32&&(r.showMedia=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Zr(l){let e,n;return e=new yr({props:{ndk:l[0],list:Ve.from(l[1])}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),u&2&&(r.list=Ve.from(t[1])),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Qr(l){let e,n;return e=new Br({props:{ndk:l[0],list:Ve.from(l[1])}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),u&2&&(r.list=Ve.from(t[1])),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function xr(l){let e,n;return e=new Cr({props:{event:l[1]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.event=t[1]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function el(l){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function tl(l){let e,n;return e=new pr({props:{event:l[1],showMedia:l[5]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.event=t[1]),u&32&&(r.showMedia=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function nl(l){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function ul(l){let e,n;return e=new hr({props:{ndk:l[0],content:l[6],event:l[1],anchorId:l[2],maxLength:l[3],showEntire:l[4],showMedia:l[5]}}),e.$on("click",l[7]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.ndk=t[0]),u&64&&(r.content=t[6]),u&2&&(r.event=t[1]),u&4&&(r.anchorId=t[2]),u&8&&(r.maxLength=t[3]),u&16&&(r.showEntire=t[4]),u&32&&(r.showMedia=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function rl(l){let e,n,t,u;const r=[ul,nl,tl,el,xr,Qr,Zr,Yr,Jr],i=[];function a(s,f){return s[1].kind===1?0:s[1].kind===40?1:s[1].kind===1063?2:s[1].kind===1985?3:s[1].kind===9802?4:s[1].kind===3e4?5:s[1].kind===30001?6:s[1].kind===30023?7:8}return e=a(l),n=i[e]=r[e](l),{c(){n.c(),t=O()},l(s){n.l(s),t=O()},m(s,f){i[e].m(s,f),A(s,t,f),u=!0},p(s,[f]){let c=e;e=a(s),e===c?i[e].p(s,f):(q(),D(i[c],1,1,()=>{i[c]=null}),L(),n=i[e],n?n.p(s,f):(n=i[e]=r[e](s),n.c()),d(n,1),n.m(t.parentNode,t))},i(s){u||(d(n),u=!0)},o(s){D(n),u=!1},d(s){s&&_(t),i[e].d(s)}}}function ll(l,e,n){let{ndk:t}=e,{event:u}=e,{anchorId:r=null}=e,{maxLength:i=700}=e,{showEntire:a=!0}=e,{showMedia:s=!0}=e,{content:f=u.content}=e;function c(o){K.call(this,l,o)}function m(o){K.call(this,l,o)}function v(o){K.call(this,l,o)}return l.$$set=o=>{"ndk"in o&&n(0,t=o.ndk),"event"in o&&n(1,u=o.event),"anchorId"in o&&n(2,r=o.anchorId),"maxLength"in o&&n(3,i=o.maxLength),"showEntire"in o&&n(4,a=o.showEntire),"showMedia"in o&&n(5,s=o.showMedia),"content"in o&&n(6,f=o.content)},[t,u,r,i,a,s,f,c,m,v]}class Nn extends G{constructor(e){super(),X(this,e,ll,rl,R,{ndk:0,event:1,anchorId:2,maxLength:3,showEntire:4,showMedia:5,content:6})}}function il(l){let e;return{c(){e=H("Encrypted item only visible to you.")},l(n){e=W(n,"Encrypted item only visible to you.")},m(n,t){A(n,e,t)},d(n){n&&_(e)}}}function al(l){let e,n="Private",t,u,r;return u=new Ge({props:{type:"light",$$slots:{default:[il]},$$scope:{ctx:l}}}),{c(){e=w("span"),e.textContent=n,t=T(),$(u.$$.fragment),this.h()},l(i){e=B(i,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1e7joib"&&(e.textContent=n),t=U(i),I(u.$$.fragment,i),this.h()},h(){E(e,"class","text-2xs text-white md:text-xs px-1.5 md:px-2 md:py-0.5 bg-indigo-600 rounded-full")},m(i,a){A(i,e,a),A(i,t,a),y(u,i,a),r=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),u.$set(s)},i(i){r||(d(u.$$.fragment,i),r=!0)},o(i){D(u.$$.fragment,i),r=!1},d(i){i&&(_(e),_(t)),M(u,i)}}}class Ee extends G{constructor(e){super(),X(this,e,null,al,R,{})}}function sl(l){let e,n;return e=new Pn({props:{strokeWidth:"1.5",size:"20",class:"stroke-gray-500 w-5 h-5"}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function fl(l){let e,n;return e=new jn({props:{strokeWidth:"1.5",size:"20",class:"stroke-green-500 w-5 h-5"}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Rt(l){let e,n,t,u;return n=new Yn({props:{strokeWidth:"1.5",size:"20",class:"stroke-gray-500 w-5 h-5"}}),{c(){e=w("a"),$(n.$$.fragment),t=H(`
                    Open in Primal`),this.h()},l(r){e=B(r,"A",{href:!0,target:!0,class:!0});var i=V(e);I(n.$$.fragment,i),t=W(i,`
                    Open in Primal`),i.forEach(_),this.h()},h(){E(e,"href",l[4]),E(e,"target","_blank"),E(e,"class","popoverActionButton shrink-0")},m(r,i){A(r,e,i),y(n,e,null),b(e,t),u=!0},p(r,i){(!u||i&16)&&E(e,"href",r[4])},i(r){u||(d(n.$$.fragment,r),u=!0)},o(r){D(n.$$.fragment,r),u=!1},d(r){r&&_(e),M(n)}}}function ol(l){let e,n,t,u,r,i,a,s,f,c;const m=[fl,sl],v=[];function o(g,F){return g[1]?0:1}t=o(l),u=v[t]=m[t](l);let h=l[4]&&Rt(l);return{c(){e=w("div"),n=w("button"),u.c(),r=H(`
                Copy `),i=H(l[3]),a=T(),h&&h.c(),this.h()},l(g){e=B(g,"DIV",{class:!0});var F=V(e);n=B(F,"BUTTON",{class:!0});var C=V(n);u.l(C),r=W(C,`
                Copy `),i=W(C,l[3]),C.forEach(_),a=U(F),h&&h.l(F),F.forEach(_),this.h()},h(){E(n,"class","popoverActionButton"),E(e,"class","flex flex-col gap-2 items-start grow")},m(g,F){A(g,e,F),b(e,n),v[t].m(n,null),b(n,r),b(n,i),b(e,a),h&&h.m(e,null),s=!0,f||(c=ot(n,"click",l[11]),f=!0)},p(g,F){let C=t;t=o(g),t!==C&&(q(),D(v[C],1,1,()=>{v[C]=null}),L(),u=v[t],u||(u=v[t]=m[t](g),u.c()),d(u,1),u.m(n,r)),(!s||F&8)&&ne(i,g[3]),g[4]?h?(h.p(g,F),F&16&&d(h,1)):(h=Rt(g),h.c(),d(h,1),h.m(e,null)):h&&(q(),D(h,1,1,()=>{h=null}),L())},i(g){s||(d(u),d(h),s=!0)},o(g){D(u),D(h),s=!1},d(g){g&&_(e),v[t].d(),h&&h.d(),f=!1,c()}}}function Ht(l){let e,n,t,u,r,i;return n=new lu({props:{strokeWidth:"1.5",size:"20",class:"stroke-gray-500 hover:stroke-black w-5 h-5"}}),r=new Un({props:{triggeredBy:"#actions-"+(l[5]?l[5]:l[2]),placement:"left-start",$$slots:{default:[ol]},$$scope:{ctx:l}}}),{c(){e=w("button"),$(n.$$.fragment),u=T(),$(r.$$.fragment),this.h()},l(a){e=B(a,"BUTTON",{id:!0,class:!0});var s=V(e);I(n.$$.fragment,s),s.forEach(_),u=U(a),I(r.$$.fragment,a),this.h()},h(){E(e,"id",t="actions-"+(l[5]?l[5]:l[2])),E(e,"class","ml-auto")},m(a,s){A(a,e,s),y(n,e,null),A(a,u,s),y(r,a,s),i=!0},p(a,s){(!i||s&36&&t!==(t="actions-"+(a[5]?a[5]:a[2])))&&E(e,"id",t);const f={};s&36&&(f.triggeredBy="#actions-"+(a[5]?a[5]:a[2])),s&16414&&(f.$$scope={dirty:s,ctx:a}),r.$set(f)},i(a){i||(d(n.$$.fragment,a),d(r.$$.fragment,a),i=!0)},o(a){D(n.$$.fragment,a),D(r.$$.fragment,a),i=!1},d(a){a&&(_(e),_(u)),M(n),M(r,a)}}}function cl(l){let e=l[0],n,t,u=Ht(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&1&&R(e,e=r[0])?(q(),D(u,1,1,N),L(),u=Ht(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function ml(l,e,n){ft();let{type:t}=e,{id:u}=e,{privateItem:r}=e,{unsaved:i}=e,{removal:a}=e,s=!1,f,c="ID",m,v;(t==="r"||t==="a")&&(v=btoa(u).slice(0,8));let o="";switch(t==="a"&&(o=iu([t,u])),t){case"p":f=ge.npubEncode(u),m=`https://primal.net/p/${f}`;break;case"e":f=ge.noteEncode(u),m=`https://primal.net/e/${f}`;break;case"a":f=o,m=void 0;break;case"r":f=u,c="URL",m=void 0;break;case"emoji":f=u,c="Name",m=void 0;break;default:console.error("Unknown ID")}async function h(F){On(F).then(()=>{n(1,s=!0),setTimeout(()=>{n(1,s=!1)},1500)})}const g=()=>h(f);return l.$$set=F=>{"type"in F&&n(7,t=F.type),"id"in F&&n(0,u=F.id),"privateItem"in F&&n(8,r=F.privateItem),"unsaved"in F&&n(9,i=F.unsaved),"removal"in F&&n(10,a=F.removal)},[u,s,f,c,m,v,h,t,r,i,a,g]}class pe extends G{constructor(e){super(),X(this,e,ml,cl,R,{type:7,id:0,privateItem:8,unsaved:9,removal:10})}}function dl(l){let e;return{c(){e=H("Staged for removal from this list")},l(n){e=W(n,"Staged for removal from this list")},m(n,t){A(n,e,t)},d(n){n&&_(e)}}}function Dl(l){let e,n="To be removed",t,u,r;return u=new Ge({props:{type:"light",$$slots:{default:[dl]},$$scope:{ctx:l}}}),{c(){e=w("span"),e.textContent=n,t=T(),$(u.$$.fragment),this.h()},l(i){e=B(i,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1i1ljvc"&&(e.textContent=n),t=U(i),I(u.$$.fragment,i),this.h()},h(){E(e,"class","text-white text-xs px-1.5 md:px-2 md:py-0.5 bg-orange-600 rounded-full lg:ml-auto")},m(i,a){A(i,e,a),A(i,t,a),y(u,i,a),r=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),u.$set(s)},i(i){r||(d(u.$$.fragment,i),r=!0)},o(i){D(u.$$.fragment,i),r=!1},d(i){i&&(_(e),_(t)),M(u,i)}}}class be extends G{constructor(e){super(),X(this,e,null,Dl,R,{})}}function _l(l){let e;return{c(){e=H("Staged for addition to this list")},l(n){e=W(n,"Staged for addition to this list")},m(n,t){A(n,e,t)},d(n){n&&_(e)}}}function hl(l){let e,n="To be added",t,u,r;return u=new Ge({props:{type:"light",$$slots:{default:[_l]},$$scope:{ctx:l}}}),{c(){e=w("span"),e.textContent=n,t=T(),$(u.$$.fragment),this.h()},l(i){e=B(i,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1qsgeip"&&(e.textContent=n),t=U(i),I(u.$$.fragment,i),this.h()},h(){E(e,"class","text-white text-xs px-1.5 md:px-2 md:py-0.5 bg-green-600 rounded-full lg:ml-auto")},m(i,a){A(i,e,a),A(i,t,a),y(u,i,a),r=!0},p(i,[a]){const s={};a&1&&(s.$$scope={dirty:a,ctx:i}),u.$set(s)},i(i){r||(d(u.$$.fragment,i),r=!0)},o(i){D(u.$$.fragment,i),r=!1},d(i){i&&(_(e),_(t)),M(u,i)}}}class vl extends G{constructor(e){super(),X(this,e,null,hl,R,{})}}function Wt(l){let e,n,t,u,r,i,a;return n=new vn({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),{c(){e=w("button"),$(n.$$.fragment),t=H(`
        Remove item`),this.h()},l(s){e=B(s,"BUTTON",{class:!0});var f=V(e);I(n.$$.fragment,f),t=W(f,`
        Remove item`),f.forEach(_),this.h()},h(){E(e,"class","primaryActionButton")},m(s,f){A(s,e,f),y(n,e,null),b(e,t),r=!0,i||(a=ot(e,"click",l[8]),i=!0)},p:N,i(s){r||(d(n.$$.fragment,s),s&&Sn(()=>{r&&(u||(u=ht(e,Ft,{x:-200,duration:300,easing:gt},!0)),u.run(1))}),r=!0)},o(s){D(n.$$.fragment,s),s&&(u||(u=ht(e,Ft,{x:-200,duration:300,easing:gt},!1)),u.run(0)),r=!1},d(s){s&&_(e),M(n),s&&u&&u.end(),i=!1,a()}}}function gl(l){let e,n,t=l[0]&&Wt(l);return{c(){t&&t.c(),e=O()},l(u){t&&t.l(u),e=O()},m(u,r){t&&t.m(u,r),A(u,e,r),n=!0},p(u,[r]){u[0]?t?(t.p(u,r),r&1&&d(t,1)):(t=Wt(u),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(q(),D(t,1,1,()=>{t=null}),L())},i(u){n||(d(t),n=!0)},o(u){D(t),n=!1},d(u){u&&_(e),t&&t.d(u)}}}function Fl(l,e,n){const t=ft();let{editMode:u=!1}=e,{type:r}=e,{id:i}=e,{privateItem:a}=e,{otherTagValues:s=void 0}=e,{unsaved:f}=e,{removal:c}=e;const m=()=>t("removeItem",{type:r,id:i,privateItem:a,otherTagValues:s,unsaved:f,removal:c});return l.$$set=v=>{"editMode"in v&&n(0,u=v.editMode),"type"in v&&n(1,r=v.type),"id"in v&&n(2,i=v.id),"privateItem"in v&&n(3,a=v.privateItem),"otherTagValues"in v&&n(4,s=v.otherTagValues),"unsaved"in v&&n(5,f=v.unsaved),"removal"in v&&n(6,c=v.removal)},[u,r,i,a,s,f,c,t,m]}class Ce extends G{constructor(e){super(),X(this,e,Fl,gl,R,{editMode:0,type:1,id:2,privateItem:3,otherTagValues:4,unsaved:5,removal:6})}}function pl(l){let e,n,t,u,r,i;return n=new vn({props:{strokeWidth:"1.5",size:"20",class:"w-5 h-5"}}),{c(){e=w("button"),$(n.$$.fragment),t=H(`
    Unstage`),this.h()},l(a){e=B(a,"BUTTON",{class:!0});var s=V(e);I(n.$$.fragment,s),t=W(s,`
    Unstage`),s.forEach(_),this.h()},h(){E(e,"class","primaryActionButton !bg-orange-50 !border-orange-300 hover:!bg-orange-100 place-self-start")},m(a,s){A(a,e,s),y(n,e,null),b(e,t),u=!0,r||(i=ot(e,"click",l[7]),r=!0)},p:N,i(a){u||(d(n.$$.fragment,a),u=!0)},o(a){D(n.$$.fragment,a),u=!1},d(a){a&&_(e),M(n),r=!1,i()}}}function kl(l,e,n){const t=ft();let{type:u}=e,{id:r}=e,{privateItem:i}=e,{otherTagValues:a=void 0}=e,{unsaved:s}=e,{removal:f}=e;const c=()=>t("removeUnsavedItem",{type:u,id:r,privateItem:i,otherTagValues:a,unsaved:s,removal:f});return l.$$set=m=>{"type"in m&&n(0,u=m.type),"id"in m&&n(1,r=m.id),"privateItem"in m&&n(2,i=m.privateItem),"otherTagValues"in m&&n(3,a=m.otherTagValues),"unsaved"in m&&n(4,s=m.unsaved),"removal"in m&&n(5,f=m.removal)},[u,r,i,a,s,f,t,c]}class Ae extends G{constructor(e){super(),X(this,e,kl,pl,R,{type:0,id:1,privateItem:2,otherTagValues:3,unsaved:4,removal:5})}}function Kt(l){let e,n;return e=new Ee({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function El(l){let e,n;return e=new vl({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function bl(l){let e,n;return e=new be({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Cl(l){let e,n,t,u;n=new Ce({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),n.$on("removeItem",l[8]);let r=!l[5]&&Gt(l);return{c(){e=w("div"),$(n.$$.fragment),t=T(),r&&r.c(),this.h()},l(i){e=B(i,"DIV",{class:!0});var a=V(e);I(n.$$.fragment,a),t=U(a),r&&r.l(a),a.forEach(_),this.h()},h(){E(e,"class","w-full lg:w-auto lg:ml-auto flex flex-row gap-2 lg:items-center")},m(i,a){A(i,e,a),y(n,e,null),b(e,t),r&&r.m(e,null),u=!0},p(i,a){const s={};a&1&&(s.type=i[0]),a&2&&(s.id=i[1]),a&4&&(s.privateItem=i[2]),a&8&&(s.unsaved=i[3]),a&16&&(s.removal=i[4]),a&32&&(s.editMode=i[5]),n.$set(s),i[5]?r&&(q(),D(r,1,1,()=>{r=null}),L()):r?(r.p(i,a),a&32&&d(r,1)):(r=Gt(i),r.c(),d(r,1),r.m(e,null))},i(i){u||(d(n.$$.fragment,i),d(r),u=!0)},o(i){D(n.$$.fragment,i),D(r),u=!1},d(i){i&&_(e),M(n),r&&r.d()}}}function Al(l){let e,n;return e=new Ae({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),e.$on("removeUnsavedItem",l[7]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&1&&(r.type=t[0]),u&2&&(r.id=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Gt(l){let e,n,t,u,r,i;return e=new zn({props:{user:l[6]}}),t=new qn({props:{user:l[6]}}),r=new pe({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),r.$on("removeItem",l[9]),{c(){$(e.$$.fragment),n=T(),$(t.$$.fragment),u=T(),$(r.$$.fragment)},l(a){I(e.$$.fragment,a),n=U(a),I(t.$$.fragment,a),u=U(a),I(r.$$.fragment,a)},m(a,s){y(e,a,s),A(a,n,s),y(t,a,s),A(a,u,s),y(r,a,s),i=!0},p(a,s){const f={};s&1&&(f.type=a[0]),s&2&&(f.id=a[1]),s&4&&(f.privateItem=a[2]),s&8&&(f.unsaved=a[3]),s&16&&(f.removal=a[4]),r.$set(f)},i(a){i||(d(e.$$.fragment,a),d(t.$$.fragment,a),d(r.$$.fragment,a),i=!0)},o(a){D(e.$$.fragment,a),D(t.$$.fragment,a),D(r.$$.fragment,a),i=!1},d(a){a&&(_(n),_(u)),M(e,a),M(t,a),M(r,a)}}}function Xt(l){let e,n,t,u,r,i,a,s,f,c,m,v;t=new hn({props:{user:l[6]}});let o=l[2]&&Kt();const h=[bl,El],g=[];function F(p,k){return p[4]&&p[3]?0:p[3]?1:-1}~(i=F(l))&&(a=g[i]=h[i](l));const C=[Al,Cl],j=[];function S(p,k){return p[3]?0:1}return f=S(l),c=j[f]=C[f](l),{c(){e=w("div"),n=w("div"),$(t.$$.fragment),u=T(),o&&o.c(),r=T(),a&&a.c(),s=T(),c.c(),this.h()},l(p){e=B(p,"DIV",{class:!0});var k=V(e);n=B(k,"DIV",{class:!0});var z=V(n);I(t.$$.fragment,z),u=U(z),o&&o.l(z),r=U(z),a&&a.l(z),z.forEach(_),s=U(k),c.l(k),k.forEach(_),this.h()},h(){E(n,"class","grow flex flex-col lg:flex-row gap-2 items-start lg:items-center"),E(e,"class",m="flex flex-col w-full lg:w-auto lg:flex-row gap-4 lg:gap-2 rounded-md p-2 my-2 lg:items-center border border-gray-200 "+(l[3]?"border-orange-500 border-dashed":""))},m(p,k){A(p,e,k),b(e,n),y(t,n,null),b(n,u),o&&o.m(n,null),b(n,r),~i&&g[i].m(n,null),b(e,s),j[f].m(e,null),v=!0},p(p,k){p[2]?o?k&4&&d(o,1):(o=Kt(),o.c(),d(o,1),o.m(n,r)):o&&(q(),D(o,1,1,()=>{o=null}),L());let z=i;i=F(p),i!==z&&(a&&(q(),D(g[z],1,1,()=>{g[z]=null}),L()),~i?(a=g[i],a||(a=g[i]=h[i](p),a.c()),d(a,1),a.m(n,null)):a=null);let Z=f;f=S(p),f===Z?j[f].p(p,k):(q(),D(j[Z],1,1,()=>{j[Z]=null}),L(),c=j[f],c?c.p(p,k):(c=j[f]=C[f](p),c.c()),d(c,1),c.m(e,null)),(!v||k&8&&m!==(m="flex flex-col w-full lg:w-auto lg:flex-row gap-4 lg:gap-2 rounded-md p-2 my-2 lg:items-center border border-gray-200 "+(p[3]?"border-orange-500 border-dashed":"")))&&E(e,"class",m)},i(p){v||(d(t.$$.fragment,p),d(o),d(a),d(c),v=!0)},o(p){D(t.$$.fragment,p),D(o),D(a),D(c),v=!1},d(p){p&&_(e),M(t),o&&o.d(),~i&&g[i].d(),j[f].d()}}}function wl(l){let e=l[1],n,t,u=Xt(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&2&&R(e,e=r[1])?(q(),D(u,1,1,N),L(),u=Xt(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function Bl(l,e,n){let t;Le(l,Xe,h=>n(10,t=h));let{type:u}=e,{pubkey:r}=e,{privateItem:i}=e,{unsaved:a}=e,{removal:s}=e,{editMode:f}=e;const c=t.getUser({hexpubkey:r});function m(h){K.call(this,l,h)}function v(h){K.call(this,l,h)}function o(h){K.call(this,l,h)}return l.$$set=h=>{"type"in h&&n(0,u=h.type),"pubkey"in h&&n(1,r=h.pubkey),"privateItem"in h&&n(2,i=h.privateItem),"unsaved"in h&&n(3,a=h.unsaved),"removal"in h&&n(4,s=h.removal),"editMode"in h&&n(5,f=h.editMode)},[u,r,i,a,s,f,c,m,v,o]}class $l extends G{constructor(e){super(),X(this,e,Bl,wl,R,{type:0,pubkey:1,privateItem:2,unsaved:3,removal:4,editMode:5})}}function Jt(l){let e,n,t,u,r,i,a,s,f,c,m,v,o,h,g;u=new hn({props:{user:l[7]}});let F=l[2]&&Yt();const C=[yl,Il],j=[];function S(p,k){return p[3]?0:1}return f=S(l),c=j[f]=C[f](l),o=new Nn({props:{ndk:l[9],event:l[6]}}),{c(){e=w("div"),n=w("div"),t=w("a"),$(u.$$.fragment),i=T(),F&&F.c(),a=T(),s=w("div"),c.c(),m=T(),v=w("div"),$(o.$$.fragment),this.h()},l(p){e=B(p,"DIV",{class:!0});var k=V(e);n=B(k,"DIV",{class:!0});var z=V(n);t=B(z,"A",{href:!0,class:!0});var Z=V(t);I(u.$$.fragment,Z),Z.forEach(_),i=U(z),F&&F.l(z),a=U(z),s=B(z,"DIV",{class:!0});var ue=V(s);c.l(ue),ue.forEach(_),z.forEach(_),m=U(k),v=B(k,"DIV",{class:!0});var P=V(v);I(o.$$.fragment,P),P.forEach(_),k.forEach(_),this.h()},h(){var p;E(t,"href",r="/"+((p=l[7])==null?void 0:p.npub)),E(t,"class","flex flex-row gap-2 items-center"),E(s,"class","flex flex-row gap-2 items-center ml-auto text-sm"),E(n,"class","flex flex-row gap-2 items-center"),E(v,"class","break-words"),E(e,"class",h="flex flex-col gap-6 border border-gray-200 rounded-md p-2 my-2 "+(l[3]?"border-orange-500 border-dashed":""))},m(p,k){A(p,e,k),b(e,n),b(n,t),y(u,t,null),b(n,i),F&&F.m(n,null),b(n,a),b(n,s),j[f].m(s,null),b(e,m),b(e,v),y(o,v,null),g=!0},p(p,k){var P;const z={};k&128&&(z.user=p[7]),u.$set(z),(!g||k&128&&r!==(r="/"+((P=p[7])==null?void 0:P.npub)))&&E(t,"href",r),p[2]?F?k&4&&d(F,1):(F=Yt(),F.c(),d(F,1),F.m(n,a)):F&&(q(),D(F,1,1,()=>{F=null}),L());let Z=f;f=S(p),f===Z?j[f].p(p,k):(q(),D(j[Z],1,1,()=>{j[Z]=null}),L(),c=j[f],c?c.p(p,k):(c=j[f]=C[f](p),c.c()),d(c,1),c.m(s,null));const ue={};k&512&&(ue.ndk=p[9]),k&64&&(ue.event=p[6]),o.$set(ue),(!g||k&8&&h!==(h="flex flex-col gap-6 border border-gray-200 rounded-md p-2 my-2 "+(p[3]?"border-orange-500 border-dashed":"")))&&E(e,"class",h)},i(p){g||(d(u.$$.fragment,p),d(F),d(c),d(o.$$.fragment,p),g=!0)},o(p){D(u.$$.fragment,p),D(F),D(c),D(o.$$.fragment,p),g=!1},d(p){p&&_(e),M(u),F&&F.d(),j[f].d(),M(o)}}}function Yt(l){let e,n;return e=new Ee({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Il(l){let e,n,t,u=vt(l[8])+"",r,i,a,s,f;return e=new Ce({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[11]),s=new pe({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),s.$on("removeItem",l[12]),{c(){$(e.$$.fragment),n=T(),t=w("div"),r=H(u),a=T(),$(s.$$.fragment),this.h()},l(c){I(e.$$.fragment,c),n=U(c),t=B(c,"DIV",{title:!0});var m=V(t);r=W(m,u),m.forEach(_),a=U(c),I(s.$$.fragment,c),this.h()},h(){E(t,"title",i=`${new Date(l[8])}`)},m(c,m){y(e,c,m),A(c,n,m),A(c,t,m),b(t,r),A(c,a,m),y(s,c,m),f=!0},p(c,m){const v={};m&1&&(v.type=c[0]),m&2&&(v.id=c[1]),m&4&&(v.privateItem=c[2]),m&8&&(v.unsaved=c[3]),m&16&&(v.removal=c[4]),m&32&&(v.editMode=c[5]),e.$set(v),(!f||m&256)&&u!==(u=vt(c[8])+"")&&ne(r,u),(!f||m&256&&i!==(i=`${new Date(c[8])}`))&&E(t,"title",i);const o={};m&1&&(o.type=c[0]),m&2&&(o.id=c[1]),m&4&&(o.privateItem=c[2]),m&8&&(o.unsaved=c[3]),m&16&&(o.removal=c[4]),s.$set(o)},i(c){f||(d(e.$$.fragment,c),d(s.$$.fragment,c),f=!0)},o(c){D(e.$$.fragment,c),D(s.$$.fragment,c),f=!1},d(c){c&&(_(n),_(t),_(a)),M(e,c),M(s,c)}}}function yl(l){let e,n,t,u=l[4]&&Zt();return n=new Ae({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),n.$on("removeUnsavedItem",l[10]),{c(){u&&u.c(),e=T(),$(n.$$.fragment)},l(r){u&&u.l(r),e=U(r),I(n.$$.fragment,r)},m(r,i){u&&u.m(r,i),A(r,e,i),y(n,r,i),t=!0},p(r,i){r[4]?u?i&16&&d(u,1):(u=Zt(),u.c(),d(u,1),u.m(e.parentNode,e)):u&&(q(),D(u,1,1,()=>{u=null}),L());const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&4&&(a.privateItem=r[2]),i&8&&(a.unsaved=r[3]),i&16&&(a.removal=r[4]),n.$set(a)},i(r){t||(d(u),d(n.$$.fragment,r),t=!0)},o(r){D(u),D(n.$$.fragment,r),t=!1},d(r){r&&_(e),u&&u.d(r),M(n,r)}}}function Zt(l){let e,n;return e=new be({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Qt(l){let e,n,t=l[6]&&l[7]&&Jt(l);return{c(){t&&t.c(),e=O()},l(u){t&&t.l(u),e=O()},m(u,r){t&&t.m(u,r),A(u,e,r),n=!0},p(u,r){u[6]&&u[7]?t?(t.p(u,r),r&192&&d(t,1)):(t=Jt(u),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(q(),D(t,1,1,()=>{t=null}),L())},i(u){n||(d(t),n=!0)},o(u){D(t),n=!1},d(u){u&&_(e),t&&t.d(u)}}}function Ml(l){let e=l[1],n,t,u=Qt(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&2&&R(e,e=r[1])?(q(),D(u,1,1,N),L(),u=Qt(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function Nl(l,e,n){let t;Le(l,Xe,C=>n(9,t=C));let{type:u}=e,{id:r}=e,{privateItem:i}=e,{unsaved:a}=e,{removal:s}=e,{editMode:f}=e,c,m,v;async function o(){n(6,c=await t.fetchEvent(r)),n(7,m=t.getUser({hexpubkey:c==null?void 0:c.pubkey})),n(8,v=c==null?void 0:c.created_at)}o();function h(C){K.call(this,l,C)}function g(C){K.call(this,l,C)}function F(C){K.call(this,l,C)}return l.$$set=C=>{"type"in C&&n(0,u=C.type),"id"in C&&n(1,r=C.id),"privateItem"in C&&n(2,i=C.privateItem),"unsaved"in C&&n(3,a=C.unsaved),"removal"in C&&n(4,s=C.removal),"editMode"in C&&n(5,f=C.editMode)},[u,r,i,a,s,f,c,m,v,t,h,g,F]}class Sl extends G{constructor(e){super(),X(this,e,Nl,Ml,R,{type:0,id:1,privateItem:2,unsaved:3,removal:4,editMode:5})}}function Vl(l){let e;return{c(){e=H(l[1])},l(n){e=W(n,l[1])},m(n,t){A(n,e,t)},p(n,t){t&2&&ne(e,n[1])},i:N,o:N,d(n){n&&_(e)}}}function Tl(l){let e,n=l[2][0]+"",t,u,r,i;return r=new Ge({props:{type:"light",$$slots:{default:[Ul]},$$scope:{ctx:l}}}),{c(){e=w("a"),t=H(n),u=T(),$(r.$$.fragment),this.h()},l(a){e=B(a,"A",{href:!0,class:!0,target:!0});var s=V(e);t=W(s,n),s.forEach(_),u=U(a),I(r.$$.fragment,a),this.h()},h(){E(e,"href",l[1]),E(e,"class","hover:underline text-sm lg:text-base"),E(e,"target","_blank")},m(a,s){A(a,e,s),b(e,t),A(a,u,s),y(r,a,s),i=!0},p(a,s){(!i||s&4)&&n!==(n=a[2][0]+"")&&ne(t,n),(!i||s&2)&&E(e,"href",a[1]);const f={};s&1026&&(f.$$scope={dirty:s,ctx:a}),r.$set(f)},i(a){i||(d(r.$$.fragment,a),i=!0)},o(a){D(r.$$.fragment,a),i=!1},d(a){a&&(_(e),_(u)),M(r,a)}}}function Ul(l){let e;return{c(){e=H(l[1])},l(n){e=W(n,l[1])},m(n,t){A(n,e,t)},p(n,t){t&2&&ne(e,n[1])},d(n){n&&_(e)}}}function xt(l){let e,n;return e=new Ee({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ol(l){let e,n,t,u;return e=new Ce({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],removal:l[5],editMode:l[6]}}),e.$on("removeItem",l[8]),t=new pe({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],removal:l[5]}}),t.$on("removeItem",l[9]),{c(){$(e.$$.fragment),n=T(),$(t.$$.fragment)},l(r){I(e.$$.fragment,r),n=U(r),I(t.$$.fragment,r)},m(r,i){y(e,r,i),A(r,n,i),y(t,r,i),u=!0},p(r,i){const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&8&&(a.privateItem=r[3]),i&16&&(a.unsaved=r[4]),i&32&&(a.removal=r[5]),i&64&&(a.editMode=r[6]),e.$set(a);const s={};i&1&&(s.type=r[0]),i&2&&(s.id=r[1]),i&8&&(s.privateItem=r[3]),i&16&&(s.unsaved=r[4]),i&32&&(s.removal=r[5]),t.$set(s)},i(r){u||(d(e.$$.fragment,r),d(t.$$.fragment,r),u=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),u=!1},d(r){r&&_(n),M(e,r),M(t,r)}}}function Pl(l){let e,n,t,u=l[5]&&en();return n=new Ae({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],removal:l[5]}}),n.$on("removeUnsavedItem",l[7]),{c(){u&&u.c(),e=T(),$(n.$$.fragment)},l(r){u&&u.l(r),e=U(r),I(n.$$.fragment,r)},m(r,i){u&&u.m(r,i),A(r,e,i),y(n,r,i),t=!0},p(r,i){r[5]?u?i&32&&d(u,1):(u=en(),u.c(),d(u,1),u.m(e.parentNode,e)):u&&(q(),D(u,1,1,()=>{u=null}),L());const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&8&&(a.privateItem=r[3]),i&16&&(a.unsaved=r[4]),i&32&&(a.removal=r[5]),n.$set(a)},i(r){t||(d(u),d(n.$$.fragment,r),t=!0)},o(r){D(u),D(n.$$.fragment,r),t=!1},d(r){r&&_(e),u&&u.d(r),M(n,r)}}}function en(l){let e,n;return e=new be({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function tn(l){let e,n,t,u,r,i,a,s,f,c,m;const v=[Tl,Vl],o=[];function h(S,p){return S[2].length>0?0:1}t=h(l),u=o[t]=v[t](l);let g=l[3]&&xt();const F=[Pl,Ol],C=[];function j(S,p){return S[4]?0:1}return s=j(l),f=C[s]=F[s](l),{c(){e=w("div"),n=w("div"),u.c(),r=T(),g&&g.c(),i=T(),a=w("div"),f.c(),this.h()},l(S){e=B(S,"DIV",{class:!0});var p=V(e);n=B(p,"DIV",{class:!0});var k=V(n);u.l(k),r=U(k),g&&g.l(k),i=U(k),a=B(k,"DIV",{class:!0});var z=V(a);f.l(z),z.forEach(_),k.forEach(_),p.forEach(_),this.h()},h(){E(a,"class","flex flex-row gap-2 items-center ml-auto text-sm"),E(n,"class","flex flex-row gap-2 w-full"),E(e,"class",c="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(l[4]?"border-orange-500 border-dashed":""))},m(S,p){A(S,e,p),b(e,n),o[t].m(n,null),b(n,r),g&&g.m(n,null),b(n,i),b(n,a),C[s].m(a,null),m=!0},p(S,p){let k=t;t=h(S),t===k?o[t].p(S,p):(q(),D(o[k],1,1,()=>{o[k]=null}),L(),u=o[t],u?u.p(S,p):(u=o[t]=v[t](S),u.c()),d(u,1),u.m(n,r)),S[3]?g?p&8&&d(g,1):(g=xt(),g.c(),d(g,1),g.m(n,i)):g&&(q(),D(g,1,1,()=>{g=null}),L());let z=s;s=j(S),s===z?C[s].p(S,p):(q(),D(C[z],1,1,()=>{C[z]=null}),L(),f=C[s],f?f.p(S,p):(f=C[s]=F[s](S),f.c()),d(f,1),f.m(a,null)),(!m||p&16&&c!==(c="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(S[4]?"border-orange-500 border-dashed":"")))&&E(e,"class",c)},i(S){m||(d(u),d(g),d(f),m=!0)},o(S){D(u),D(g),D(f),m=!1},d(S){S&&_(e),o[t].d(),g&&g.d(),C[s].d()}}}function jl(l){let e=l[1],n,t,u=tn(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&2&&R(e,e=r[1])?(q(),D(u,1,1,N),L(),u=tn(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function zl(l,e,n){let{type:t}=e,{id:u}=e,{otherTagValues:r}=e,{privateItem:i}=e,{unsaved:a}=e,{removal:s}=e,{editMode:f}=e;function c(o){K.call(this,l,o)}function m(o){K.call(this,l,o)}function v(o){K.call(this,l,o)}return l.$$set=o=>{"type"in o&&n(0,t=o.type),"id"in o&&n(1,u=o.id),"otherTagValues"in o&&n(2,r=o.otherTagValues),"privateItem"in o&&n(3,i=o.privateItem),"unsaved"in o&&n(4,a=o.unsaved),"removal"in o&&n(5,s=o.removal),"editMode"in o&&n(6,f=o.editMode)},[t,u,r,i,a,s,f,c,m,v]}class ql extends G{constructor(e){super(),X(this,e,zl,jl,R,{type:0,id:1,otherTagValues:2,privateItem:3,unsaved:4,removal:5,editMode:6})}}function nn(l){let e,n;return e=new Ee({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function un(l){let e,n,t;return n=new pe({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],removal:l[5]}}),n.$on("removeItem",l[7]),{c(){e=w("div"),$(n.$$.fragment),this.h()},l(u){e=B(u,"DIV",{class:!0});var r=V(e);I(n.$$.fragment,r),r.forEach(_),this.h()},h(){E(e,"class","lg:hidden ml-auto")},m(u,r){A(u,e,r),y(n,e,null),t=!0},p(u,r){const i={};r&1&&(i.type=u[0]),r&2&&(i.id=u[1]),r&8&&(i.privateItem=u[3]),r&16&&(i.unsaved=u[4]),r&32&&(i.removal=u[5]),n.$set(i)},i(u){t||(d(n.$$.fragment,u),t=!0)},o(u){D(n.$$.fragment,u),t=!1},d(u){u&&_(e),M(n)}}}function Ll(l){let e,n,t,u;e=new Ce({props:{type:l[0],id:l[1],privateItem:l[3],otherTagValues:l[2],unsaved:l[4],removal:l[5],editMode:l[6]}}),e.$on("removeItem",l[9]);let r=!l[6]&&rn(l);return{c(){$(e.$$.fragment),n=T(),r&&r.c(),t=O()},l(i){I(e.$$.fragment,i),n=U(i),r&&r.l(i),t=O()},m(i,a){y(e,i,a),A(i,n,a),r&&r.m(i,a),A(i,t,a),u=!0},p(i,a){const s={};a&1&&(s.type=i[0]),a&2&&(s.id=i[1]),a&8&&(s.privateItem=i[3]),a&4&&(s.otherTagValues=i[2]),a&16&&(s.unsaved=i[4]),a&32&&(s.removal=i[5]),a&64&&(s.editMode=i[6]),e.$set(s),i[6]?r&&(q(),D(r,1,1,()=>{r=null}),L()):r?(r.p(i,a),a&64&&d(r,1)):(r=rn(i),r.c(),d(r,1),r.m(t.parentNode,t))},i(i){u||(d(e.$$.fragment,i),d(r),u=!0)},o(i){D(e.$$.fragment,i),D(r),u=!1},d(i){i&&(_(n),_(t)),M(e,i),r&&r.d(i)}}}function Rl(l){let e,n,t,u=l[5]&&ln();return n=new Ae({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],otherTagValues:l[2],removal:l[5]}}),n.$on("removeUnsavedItem",l[8]),{c(){u&&u.c(),e=T(),$(n.$$.fragment)},l(r){u&&u.l(r),e=U(r),I(n.$$.fragment,r)},m(r,i){u&&u.m(r,i),A(r,e,i),y(n,r,i),t=!0},p(r,i){r[5]?u?i&32&&d(u,1):(u=ln(),u.c(),d(u,1),u.m(e.parentNode,e)):u&&(q(),D(u,1,1,()=>{u=null}),L());const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&8&&(a.privateItem=r[3]),i&16&&(a.unsaved=r[4]),i&4&&(a.otherTagValues=r[2]),i&32&&(a.removal=r[5]),n.$set(a)},i(r){t||(d(u),d(n.$$.fragment,r),t=!0)},o(r){D(u),D(n.$$.fragment,r),t=!1},d(r){r&&_(e),u&&u.d(r),M(n,r)}}}function rn(l){let e,n,t;return n=new pe({props:{type:l[0],id:l[1],privateItem:l[3],unsaved:l[4],removal:l[5]}}),n.$on("removeItem",l[10]),{c(){e=w("div"),$(n.$$.fragment),this.h()},l(u){e=B(u,"DIV",{class:!0});var r=V(e);I(n.$$.fragment,r),r.forEach(_),this.h()},h(){E(e,"class","hidden lg:block")},m(u,r){A(u,e,r),y(n,e,null),t=!0},p(u,r){const i={};r&1&&(i.type=u[0]),r&2&&(i.id=u[1]),r&8&&(i.privateItem=u[3]),r&16&&(i.unsaved=u[4]),r&32&&(i.removal=u[5]),n.$set(i)},i(u){t||(d(n.$$.fragment,u),t=!0)},o(u){D(n.$$.fragment,u),t=!1},d(u){u&&_(e),M(n)}}}function ln(l){let e,n;return e=new be({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function an(l){let e,n,t,u,r,i,a,s,f,c,m,v,o,h,g,F,C,j,S,p=l[3]&&nn(),k=!l[6]&&!l[4]&&un(l);const z=[Rl,Ll],Z=[];function ue(P,J){return P[4]?0:1}return g=ue(l),F=Z[g]=z[g](l),{c(){e=w("div"),n=w("div"),t=w("div"),u=w("img"),i=T(),a=w("span"),s=H(":"),f=H(l[1]),c=H(":"),m=T(),p&&p.c(),v=T(),k&&k.c(),o=T(),h=w("div"),F.c(),this.h()},l(P){e=B(P,"DIV",{class:!0});var J=V(e);n=B(J,"DIV",{class:!0});var ae=V(n);t=B(ae,"DIV",{class:!0});var re=V(t);u=B(re,"IMG",{src:!0,class:!0,alt:!0}),i=U(re),a=B(re,"SPAN",{class:!0});var ce=V(a);s=W(ce,":"),f=W(ce,l[1]),c=W(ce,":"),ce.forEach(_),m=U(re),p&&p.l(re),v=U(re),k&&k.l(re),re.forEach(_),o=U(ae),h=B(ae,"DIV",{class:!0});var Fe=V(h);F.l(Fe),Fe.forEach(_),ae.forEach(_),J.forEach(_),this.h()},h(){se(u.src,r=l[2][0])||E(u,"src",r),E(u,"class","w-12 h-12"),E(u,"alt",l[1]),E(a,"class","break-all text-sm lg:text-base"),E(t,"class","flex flex-row gap-2 items-center"),E(h,"class","flex flex-col lg:flex-row gap-2 items-start lg:items-center lg:ml-auto text-sm"),E(n,"class",C="flex flex-col "+(l[6]?"gap-2":"")+" lg:flex-row w-full lg:items-center"),E(e,"class",j="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(l[4]?"border-orange-500 border-dashed":""))},m(P,J){A(P,e,J),b(e,n),b(n,t),b(t,u),b(t,i),b(t,a),b(a,s),b(a,f),b(a,c),b(t,m),p&&p.m(t,null),b(t,v),k&&k.m(t,null),b(n,o),b(n,h),Z[g].m(h,null),S=!0},p(P,J){(!S||J&4&&!se(u.src,r=P[2][0]))&&E(u,"src",r),(!S||J&2)&&E(u,"alt",P[1]),(!S||J&2)&&ne(f,P[1]),P[3]?p?J&8&&d(p,1):(p=nn(),p.c(),d(p,1),p.m(t,v)):p&&(q(),D(p,1,1,()=>{p=null}),L()),!P[6]&&!P[4]?k?(k.p(P,J),J&80&&d(k,1)):(k=un(P),k.c(),d(k,1),k.m(t,null)):k&&(q(),D(k,1,1,()=>{k=null}),L());let ae=g;g=ue(P),g===ae?Z[g].p(P,J):(q(),D(Z[ae],1,1,()=>{Z[ae]=null}),L(),F=Z[g],F?F.p(P,J):(F=Z[g]=z[g](P),F.c()),d(F,1),F.m(h,null)),(!S||J&64&&C!==(C="flex flex-col "+(P[6]?"gap-2":"")+" lg:flex-row w-full lg:items-center"))&&E(n,"class",C),(!S||J&16&&j!==(j="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(P[4]?"border-orange-500 border-dashed":"")))&&E(e,"class",j)},i(P){S||(d(p),d(k),d(F),S=!0)},o(P){D(p),D(k),D(F),S=!1},d(P){P&&_(e),p&&p.d(),k&&k.d(),Z[g].d()}}}function Hl(l){let e=l[1],n,t,u=an(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&2&&R(e,e=r[1])?(q(),D(u,1,1,N),L(),u=an(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function Wl(l,e,n){let{type:t}=e,{id:u}=e,{otherTagValues:r}=e,{privateItem:i}=e,{unsaved:a}=e,{removal:s}=e,{editMode:f}=e;function c(h){K.call(this,l,h)}function m(h){K.call(this,l,h)}function v(h){K.call(this,l,h)}function o(h){K.call(this,l,h)}return l.$$set=h=>{"type"in h&&n(0,t=h.type),"id"in h&&n(1,u=h.id),"otherTagValues"in h&&n(2,r=h.otherTagValues),"privateItem"in h&&n(3,i=h.privateItem),"unsaved"in h&&n(4,a=h.unsaved),"removal"in h&&n(5,s=h.removal),"editMode"in h&&n(6,f=h.editMode)},[t,u,r,i,a,s,f,c,m,v,o]}class Kl extends G{constructor(e){super(),X(this,e,Wl,Hl,R,{type:0,id:1,otherTagValues:2,privateItem:3,unsaved:4,removal:5,editMode:6})}}function sn(l){let e,n,t,u,r,i="created by",a,s,f,c,m;return f=new Ke({props:{ndk:l[2],user:l[1]}}),{c(){e=w("span"),n=w("span"),t=H(l[0]),u=T(),r=w("span"),r.textContent=i,a=T(),s=w("a"),$(f.$$.fragment),this.h()},l(v){e=B(v,"SPAN",{class:!0});var o=V(e);n=B(o,"SPAN",{class:!0});var h=V(n);t=W(h,l[0]),h.forEach(_),u=U(o),r=B(o,"SPAN",{class:!0,"data-svelte-h":!0}),le(r)!=="svelte-8uo5wo"&&(r.textContent=i),a=U(o),s=B(o,"A",{href:!0,class:!0});var g=V(s);I(f.$$.fragment,g),g.forEach(_),o.forEach(_),this.h()},h(){E(n,"class","font-semibold"),E(r,"class","italic text-sm"),E(s,"href",c="/"+l[1].npub),E(s,"class","hover:underline"),E(e,"class","break-all text-sm lg:text-base")},m(v,o){A(v,e,o),b(e,n),b(n,t),b(e,u),b(e,r),b(e,a),b(e,s),y(f,s,null),m=!0},p(v,o){(!m||o&1)&&ne(t,v[0]);const h={};o&4&&(h.ndk=v[2]),o&2&&(h.user=v[1]),f.$set(h),(!m||o&2&&c!==(c="/"+v[1].npub))&&E(s,"href",c)},i(v){m||(d(f.$$.fragment,v),m=!0)},o(v){D(f.$$.fragment,v),m=!1},d(v){v&&_(e),M(f)}}}function Gl(l){let e=l[0],n,t,u=sn(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&1&&R(e,e=r[0])?(q(),D(u,1,1,N),L(),u=sn(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function Xl(l,e,n){let t;Le(l,Xe,i=>n(2,t=i));let{name:u}=e,{creator:r}=e;return l.$$set=i=>{"name"in i&&n(0,u=i.name),"creator"in i&&n(1,r=i.creator)},[u,r,t]}class Jl extends G{constructor(e){super(),X(this,e,Xl,Gl,R,{name:0,creator:1})}}function Yl(l){let e,n,t,u=JSON.stringify([l[0],l[1]])+"",r;return{c(){e=w("pre"),n=H("Unsupported item: "),t=w("code"),r=H(u),this.h()},l(i){e=B(i,"PRE",{class:!0});var a=V(e);n=W(a,"Unsupported item: "),t=B(a,"CODE",{});var s=V(t);r=W(s,u),s.forEach(_),a.forEach(_),this.h()},h(){E(e,"class","py-2")},m(i,a){A(i,e,a),b(e,n),b(e,t),b(t,r)},p(i,a){a&3&&u!==(u=JSON.stringify([i[0],i[1]])+"")&&ne(r,u)},i:N,o:N,d(i){i&&_(e)}}}function Zl(l){let e,n;return e=new Jl({props:{name:l[8],creator:l[7]}}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p:N,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function fn(l){let e,n;return e=new Ee({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ql(l){let e,n,t,u;return e=new Ce({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[10]),t=new pe({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),t.$on("removeItem",l[11]),{c(){$(e.$$.fragment),n=T(),$(t.$$.fragment)},l(r){I(e.$$.fragment,r),n=U(r),I(t.$$.fragment,r)},m(r,i){y(e,r,i),A(r,n,i),y(t,r,i),u=!0},p(r,i){const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&4&&(a.privateItem=r[2]),i&8&&(a.unsaved=r[3]),i&16&&(a.removal=r[4]),i&32&&(a.editMode=r[5]),e.$set(a);const s={};i&1&&(s.type=r[0]),i&2&&(s.id=r[1]),i&4&&(s.privateItem=r[2]),i&8&&(s.unsaved=r[3]),i&16&&(s.removal=r[4]),t.$set(s)},i(r){u||(d(e.$$.fragment,r),d(t.$$.fragment,r),u=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),u=!1},d(r){r&&_(n),M(e,r),M(t,r)}}}function xl(l){let e,n,t,u=l[4]&&on();return n=new Ae({props:{type:l[0],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4]}}),n.$on("removeUnsavedItem",l[9]),{c(){u&&u.c(),e=T(),$(n.$$.fragment)},l(r){u&&u.l(r),e=U(r),I(n.$$.fragment,r)},m(r,i){u&&u.m(r,i),A(r,e,i),y(n,r,i),t=!0},p(r,i){r[4]?u?i&16&&d(u,1):(u=on(),u.c(),d(u,1),u.m(e.parentNode,e)):u&&(q(),D(u,1,1,()=>{u=null}),L());const a={};i&1&&(a.type=r[0]),i&2&&(a.id=r[1]),i&4&&(a.privateItem=r[2]),i&8&&(a.unsaved=r[3]),i&16&&(a.removal=r[4]),n.$set(a)},i(r){t||(d(u),d(n.$$.fragment,r),t=!0)},o(r){D(u),D(n.$$.fragment,r),t=!1},d(r){r&&_(e),u&&u.d(r),M(n,r)}}}function on(l){let e,n;return e=new be({}),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function cn(l){let e,n,t,u,r,i,a,s,f,c,m;const v=[Zl,Yl],o=[];function h(S,p){return S[6]===34550?0:1}t=h(l),u=o[t]=v[t](l);let g=l[2]&&fn();const F=[xl,Ql],C=[];function j(S,p){return S[3]?0:1}return s=j(l),f=C[s]=F[s](l),{c(){e=w("div"),n=w("div"),u.c(),r=T(),g&&g.c(),i=T(),a=w("div"),f.c(),this.h()},l(S){e=B(S,"DIV",{class:!0});var p=V(e);n=B(p,"DIV",{class:!0});var k=V(n);u.l(k),r=U(k),g&&g.l(k),i=U(k),a=B(k,"DIV",{class:!0});var z=V(a);f.l(z),z.forEach(_),k.forEach(_),p.forEach(_),this.h()},h(){E(a,"class","flex flex-row gap-2 items-center ml-auto text-sm"),E(n,"class","flex flex-row gap-2 w-full items-center"),E(e,"class",c="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(l[3]?"border-orange-500 border-dashed":""))},m(S,p){A(S,e,p),b(e,n),o[t].m(n,null),b(n,r),g&&g.m(n,null),b(n,i),b(n,a),C[s].m(a,null),m=!0},p(S,p){u.p(S,p),S[2]?g?p&4&&d(g,1):(g=fn(),g.c(),d(g,1),g.m(n,i)):g&&(q(),D(g,1,1,()=>{g=null}),L());let k=s;s=j(S),s===k?C[s].p(S,p):(q(),D(C[k],1,1,()=>{C[k]=null}),L(),f=C[s],f?f.p(S,p):(f=C[s]=F[s](S),f.c()),d(f,1),f.m(a,null)),(!m||p&8&&c!==(c="flex flex-row gap-2 rounded-md p-2 my-2 items-center border border-gray-200 "+(S[3]?"border-orange-500 border-dashed":"")))&&E(e,"class",c)},i(S){m||(d(u),d(g),d(f),m=!0)},o(S){D(u),D(g),D(f),m=!1},d(S){S&&_(e),o[t].d(),g&&g.d(),C[s].d()}}}function ei(l){let e=l[1],n,t,u=cn(l);return{c(){u.c(),n=O()},l(r){u.l(r),n=O()},m(r,i){u.m(r,i),A(r,n,i),t=!0},p(r,[i]){i&2&&R(e,e=r[1])?(q(),D(u,1,1,N),L(),u=cn(r),u.c(),d(u,1),u.m(n.parentNode,n)):u.p(r,i)},i(r){t||(d(u),t=!0)},o(r){D(u),t=!1},d(r){r&&_(n),u.d(r)}}}function ti(l,e,n){let t;Le(l,Xe,C=>n(12,t=C));let{type:u}=e,{id:r}=e,{privateItem:i}=e,{unsaved:a}=e,{removal:s}=e,{editMode:f}=e;const c=r.split(":"),m=parseInt(c[0]),v=t.getUser({hexpubkey:c[1]}),o=c[2];function h(C){K.call(this,l,C)}function g(C){K.call(this,l,C)}function F(C){K.call(this,l,C)}return l.$$set=C=>{"type"in C&&n(0,u=C.type),"id"in C&&n(1,r=C.id),"privateItem"in C&&n(2,i=C.privateItem),"unsaved"in C&&n(3,a=C.unsaved),"removal"in C&&n(4,s=C.removal),"editMode"in C&&n(5,f=C.editMode)},[u,r,i,a,s,f,m,v,o,h,g,F]}class ni extends G{constructor(e){super(),X(this,e,ti,ei,R,{type:0,id:1,privateItem:2,unsaved:3,removal:4,editMode:5})}}function ui(l){let e,n,t,u=JSON.stringify(l[0])+"",r;return{c(){e=w("pre"),n=H("Unsupported item: "),t=w("code"),r=H(u),this.h()},l(i){e=B(i,"PRE",{class:!0});var a=V(e);n=W(a,"Unsupported item: "),t=B(a,"CODE",{});var s=V(t);r=W(s,u),s.forEach(_),a.forEach(_),this.h()},h(){E(e,"class","py-2")},m(i,a){A(i,e,a),b(e,n),b(e,t),b(t,r)},p(i,a){a&1&&u!==(u=JSON.stringify(i[0])+"")&&ne(r,u)},i:N,o:N,d(i){i&&_(e)}}}function ri(l){let e,n;return e=new Kl({props:{type:l[6],id:l[1],otherTagValues:l[7],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[16]),e.$on("removeUnsavedItem",l[17]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.id=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),u&32&&(r.editMode=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function li(l){let e,n;return e=new ni({props:{type:l[6],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[14]),e.$on("removeUnsavedItem",l[15]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.id=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),u&32&&(r.editMode=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function ii(l){let e,n;return e=new ql({props:{type:l[6],id:l[1],otherTagValues:l[7],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[12]),e.$on("removeUnsavedItem",l[13]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.id=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),u&32&&(r.editMode=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function ai(l){let e,n;return e=new Sl({props:{type:l[6],id:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[10]),e.$on("removeUnsavedItem",l[11]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.id=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),u&32&&(r.editMode=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function si(l){let e,n;return e=new $l({props:{type:l[6],pubkey:l[1],privateItem:l[2],unsaved:l[3],removal:l[4],editMode:l[5]}}),e.$on("removeItem",l[8]),e.$on("removeUnsavedItem",l[9]),{c(){$(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,u){y(e,t,u),n=!0},p(t,u){const r={};u&2&&(r.pubkey=t[1]),u&4&&(r.privateItem=t[2]),u&8&&(r.unsaved=t[3]),u&16&&(r.removal=t[4]),u&32&&(r.editMode=t[5]),e.$set(r)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function fi(l){let e,n,t,u;const r=[si,ai,ii,li,ri,ui],i=[];function a(s,f){return s[6]==="p"?0:s[6]==="e"?1:s[6]==="r"?2:s[6]==="a"?3:s[6]==="emoji"?4:5}return n=a(l),t=i[n]=r[n](l),{c(){e=w("div"),t.c()},l(s){e=B(s,"DIV",{});var f=V(e);t.l(f),f.forEach(_)},m(s,f){A(s,e,f),i[n].m(e,null),u=!0},p(s,[f]){t.p(s,f)},i(s){u||(d(t),u=!0)},o(s){D(t),u=!1},d(s){s&&_(e),i[n].d()}}}function oi(l,e,n){let{tag:t}=e,{id:u}=e,{privateItem:r}=e,{unsaved:i}=e,{removal:a=!1}=e,{editMode:s=!1}=e;const f=t[0],c=t.slice(2);function m(k){K.call(this,l,k)}function v(k){K.call(this,l,k)}function o(k){K.call(this,l,k)}function h(k){K.call(this,l,k)}function g(k){K.call(this,l,k)}function F(k){K.call(this,l,k)}function C(k){K.call(this,l,k)}function j(k){K.call(this,l,k)}function S(k){K.call(this,l,k)}function p(k){K.call(this,l,k)}return l.$$set=k=>{"tag"in k&&n(0,t=k.tag),"id"in k&&n(1,u=k.id),"privateItem"in k&&n(2,r=k.privateItem),"unsaved"in k&&n(3,i=k.unsaved),"removal"in k&&n(4,a=k.removal),"editMode"in k&&n(5,s=k.editMode)},[t,u,r,i,a,s,f,c,m,v,o,h,g,F,C,j,S,p]}class Ai extends G{constructor(e){super(),X(this,e,oi,fi,R,{tag:0,id:1,privateItem:2,unsaved:3,removal:4,editMode:5})}}let Ne;const ci=new Uint8Array(16);function mi(){if(!Ne&&(Ne=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ne(ci)}const x=[];for(let l=0;l<256;++l)x.push((l+256).toString(16).slice(1));function di(l,e=0){return x[l[e+0]]+x[l[e+1]]+x[l[e+2]]+x[l[e+3]]+"-"+x[l[e+4]]+x[l[e+5]]+"-"+x[l[e+6]]+x[l[e+7]]+"-"+x[l[e+8]]+x[l[e+9]]+"-"+x[l[e+10]]+x[l[e+11]]+x[l[e+12]]+x[l[e+13]]+x[l[e+14]]+x[l[e+15]]}const Di=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mn={randomUUID:Di};function wi(l,e,n){if(mn.randomUUID&&!e&&!l)return mn.randomUUID();l=l||{};const t=l.random||(l.rng||mi)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){n=n||0;for(let u=0;u<16;++u)e[n+u]=t[u];return e}return di(t)}export{ki as C,Ei as I,lu as M,bi as N,Ai as a,Ci as n,wi as v};
